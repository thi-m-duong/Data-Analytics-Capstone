*------------------------------------------------------------*
* Score Log
Date:                April 21, 2016
Time:                05:41:58
*------------------------------------------------------------*
16572  %let EMEXCEPTIONSTRING=;
16573  *------------------------------------------------------------*;
16574  * SCORE: Tree5;
16575  *------------------------------------------------------------*;
16576  %let EM_ACTION = SCORE;
16577  %let syscc = 0;
16578  %macro main;
16579  
16580    %if %upcase(&EM_ACTION) = CREATE %then %do;
16581      filename temp catalog 'sashelp.emmodl.tree_create.source';
16582      %include temp;
16583      filename temp;
16584  
16585      %em_tree_create;
16586    %end;
16587  
16588     %else
16589     %if %upcase(&EM_ACTION) = TRAIN %then %do;
16590  
16591         filename temp catalog 'sashelp.emmodl.tree_train.source';
16592         %include temp;
16593         filename temp;
16594         %em_tree_train;
16595     %end;
16596  
16597    %else
16598    %if %upcase(&EM_ACTION) = SCORE %then %do;
16599      filename temp catalog 'sashelp.emmodl.tree_score.source';
16600      %include temp;
16601      filename temp;
16602  
16603      %em_tree_score;
16604  
16605    %end;
16606  
16607    %else
16608    %if %upcase(&EM_ACTION) = REPORT %then %do;
16609  
16610         filename temp catalog 'sashelp.emmodl.tree_report.source';
16611         %include temp;
16612         filename temp;
16613  
16614         %em_tree_report;
16615     %end;
16616  
16617    %else
16618    %if %upcase(&EM_ACTION) = OPENINT %then %do;
16619  
16620         filename temp catalog 'sashelp.emmodl.tree_actions.source';
16621         %include temp;
16622         filename temp;
16623         %EM_TREE_OPENTREEVIEWER;
16624  
16625     %end;
16626  
16627    %else
16628    %if %upcase(&EM_ACTION) = CLOSEINT %then %do;
16629  
16630         filename temp catalog 'sashelp.emmodl.tree_actions.source';
16631         %include temp;
16632         filename temp;
16633         %EM_TREE_CLOSETREEVIEWER;
16634  
16635     %end;
16636  
16637  
16638     %doendm:
16639  %mend main;
16640  
16641  %main;
NOTE: %INCLUDE (level 1) file TEMP is file SASHELP.EMMODL.TREE_SCORE.SOURCE.
16643 +%macro em_tree_score;
16645 +   /* determine if multiple targets will be processed */
16646 +   %let em_tree_multipleTargets=N;
16647 +   %let em_tree_numTarget=1;
16648 +   %if "&EM_PROPERTY_USEMULTIPLETARGET" eq "Y" %then %do;
16649 +      /* determine if there are any ordinal target variables - if so, multiple targets are not supported */
16650 +      %if &EM_NUM_ORDINAL_TARGET gt 0 %then %do;
16651 +         %let em_tree_multipleTargets=N;
16652 +      %end;
16653 +      %else %do;
16654 +         /* create macro array of targets  */
16655 +         data _null_;
16656 +           set &EM_DATA_VARIABLESET(where=(ROLE='TARGET' AND LEVEL^='ORDINAL')) end=eof;
16657 +           call symput('em_tree_targetVars'!!strip(put(_N_, BEST.)), strip(Name));
16658 +           if eof then
16659 +             call symput('em_tree_numTarget', strip(put(_N_, BEST.)));
16660 +        run;
16662 +        %if &em_tree_numTarget gt 1 %then %do;
16663 +           %let em_tree_multipleTargets=Y;
16664 +        %end;
16665 +      %end;
16666 +   %end;
16668 +   /* build flow and publish scoring code */
16669 +   %EM_GETNAME(key=TREEFLOW, type=FILE, extension=sas);
16670 +   %EM_GETNAME(key=TREEPUBLISH, type=FILE, extension=sas);
16672 +   filename treeflow "&EM_USER_TREEFLOW";
16673 +   filename treepub "&EM_USER_TREEPUBLISH";
16675 +   filename flowref  "&EM_FILE_EMFLOWSCORECODE";
16676 +   filename pubref   "&EM_FILE_EMPUBLISHSCORECODE";
16678 +   %em_copyfile(infref=treeflow, outfref=flowref);
16679 +   %em_copyfile(infref=treepub, outfref=pubref);
16681 +   filename treeflow;
16682 +   filename treepub;
16684 +   /* if priors are used, add code to generate unadjusted residuals in export */
16685 +   %let useAdjPriors = N;
16686 +   data _null_;
16687 +     set &EM_DEC_DECMETA(where=(_TYPE_="DECPRIOR"));
16688 +     if USE="Y" then call symput('useAdjPriors', 'Y');
16689 +   run;
16690 +   %if (("&em_tree_multipleTargets" eq "N") AND ("&useAdjPriors" eq "Y")) %then %do;
16691 +      filename temp catalog 'sashelp.emutil.em_makeunadjustedresidualvars.source';
16692 +      %include temp;
16693 +      filename temp;
16695 +      %EM_GETNAME(key=adjResidualCode, type=FILE, extension=sas);
16696 +      filename adjref "&EM_USER_adjResidualCode";
16697 +      %makeUnadjustedResidualVars(target=%EM_TARGET, decmeta=&EM_DEC_DECMETA, fref=adjref);
16699 +      %em_copyfile(infref=adjref, outfref=flowref, append=Y);
16701 +      filename adjref;
16702 +   %end;
16704 +   /* LEAF */
16705 +   %if "&EM_PROPERTY_LEAFID" eq "Y" %then %do;
16706 +      data _null_;
16707 +        file flowref mod;
16708 +        put 'drop _LEAF_;';
16709 +      run;
16711 +      data _null_;
16712 +        file pubref mod;
16713 +        put 'drop _LEAF_;';
16714 +      run;
16716 +   %end;
16718 +   filename flowref;
16719 +   filename pubref;
16721 +   /* em_metachange code */
16722 +   %if "&EM_PROPERTY_LEAFID" eq "Y" %then %do;
16723 +     %EM_METACHANGE(name=_NODE_, role=&EM_PROPERTY_NODEROLE, LEVEL=NOMINAL);
16724 +   %end;
16726 +   /* variable selection based on importance stat    */
16727 +   %if "&EM_PROPERTY_VARSELECTION" eq "Y" %then %do;
16728 +     %EM_GETNAME(key=OUTIMPORT, type=DATA);
16729 +     %let dsid = %sysfunc(open(&EM_USER_OUTIMPORT(where=(IMPORTANCE<0.05))));
16730 +     %let varnum = %sysfunc(varnum(&dsid, NAME));
16731 +     %let obs = %sysfunc(fetch(&dsid));
16732 +     %do %while(&obs=0);
16733 +       %let temp = %nrbquote(%sysfunc(getvarc(&dsid, &varnum)));
16734 +       %let varname = %nrbquote(%sysfunc(tranwrd(&temp,  %str(%"),"")));
16735 +       %EM_METACHANGE(name=&varname, role=REJECTED);
16736 +       %let obs = %sysfunc(fetch(&dsid));
16737 +     %end;
16738 +     %if &dsid %then %let dsid=%sysfunc(close(&dsid));
16739 +   %end;
16741 +   /* set Q_ varaibles to role of ASSESS when in the presense of prior probabilities */
16742 +   %if %sysfunc(exist(&EM_DEC_DECMETA)) %then %do;
16743 +    %let tree_pred_vars = ;
16744 +    %let tree_pred_lvl =;
16745 +    %let numpred= 0;
16747 +    data _null_;
16748 +     set &EM_DEC_DECMETA(where=(_TYPE_="PREDICTED")) end=eof;
16749 +     call symput('tree_pred_vars'!!strip(put(_N_, BEST.)), strip(VARIABLE));
16750 +     call symput('tree_pred_lvl'!!strip(put(_N_, BEST.)), strip(LEVEL));
16751 +     if eof then
16752 +       call symput('numpred', strip(put(_N_, BEST.)));
16753 +    run;
16754 +   %end;
16756 +   %if &numpred ne 0 %then %do;
16757 +    %do i=1 %to &numpred;
16758 +      %let qpred = Q%substr(&&tree_pred_vars&i,2);
16759 +      %EM_METACHANGE(name=&qpred, role=ASSESS);
16760 +    %end;
16761 +   %end;
16763 +   /* determine if multiple targets will be processed */
16764 +   %let em_tree_multipleTargets=N;
16765 +   %let em_tree_numTarget=1;
16766 +   %if "&EM_PROPERTY_USEMULTIPLETARGET" eq "Y" %then %do;
16767 +      /* determine if there are any ordinal target variables - if so, multiple targets are not supported */
16768 +      %if &EM_NUM_ORDINAL_TARGET gt 0 %then %do;
16769 +         %let em_tree_multipleTargets=N;
16770 +      %end;
16771 +      %else %do;
16772 +        data _null_;
16773 +          set &EM_DATA_VARIABLESET(where=(ROLE='TARGET' AND LEVEL^='ORDINAL')) end=eof;
16774 +          if eof then
16775 +            call symput('em_tree_numTarget', strip(put(_N_, BEST.)));
16776 +        run;
16778 +        %if &em_tree_numTarget gt 1 %then %do;
16779 +           %let em_tree_multipleTargets=Y;
16780 +        %end;
16781 +     %end;
16782 +   %end;
16784 +   /* need to include this code to do the %em_report for OUTIMPORT here instead of in Report code so _loop data set is created when group processing */
16785 +   %if "&em_tree_multipleTargets" eq "N" %then %do;
16787 +      /* variable importance */
16788 +      %EM_GETNAME(key=OUTIMPORT, type=DATA);
16789 +      %if %sysfunc(exist(&EM_USER_OUTIMPORT)) eq 1 %then %do;
16791 +         %let validexist=0;
16792 +         %if (("&EM_IMPORT_VALIDATE" ne "") AND (%sysfunc(exist(&EM_IMPORT_VALIDATE)) or %sysfunc(exist(&EM_IMPORT_VALIDATE,VIEW)))) %then %do;
16793 +           %let validexist=1;
16794 +         %end;
16796 +         /* determine if vars exists - properties could indicate they are they but freeze=Y would mean the node wasn't retrained */
16797 +         /* and the columns may not be generated                                                                                 */
16798 +         %let em_tree_cvexists=;
16799 +         %let em_tree_surrexists=.;
16800 +         data _null_;
16801 +            set &EM_USER_OUTIMPORT (obs=2) end=eof;
16802 +            if eof then do ;
16803 +               call symput("em_tree_cvexists" , strip(put(cvimportance,best.))) ;
16804 +               call symput("em_tree_surrexists", strip(put(nsurrogates, best.)));
16805 +            end;
16806 +         run;
16808 +         data &EM_USER_OUTIMPORT;
16809 +            set &EM_USER_OUTIMPORT;
16811 +            /* format columns based on Precison value specified */
16812 +            format importance 15.&EM_PROPERTY_PRECISION
16813 +                 %if &validexist %then %do;
16814 +                   vimportance ratio 15.&EM_PROPERTY_PRECISION
16815 +                 %end;
16816 +                 %if "&EM_TREE_CVEXISTS" ne "." %then %do;
16817 +                   cvimportance vimportance ratio 15.&EM_PROPERTY_PRECISION
16818 +                 %end;
16819 +            ;
16820 +            label  NAME       = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel, noquote))"
16821 +                 LABEL        = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel, noquote))"
16822 +                 NRULES       = "%sysfunc(sasmsg(sashelp.dmine, rpt_nrules_vlabel, noquote))"
16823 +                 IMPORTANCE   = "%sysfunc(sasmsg(sashelp.dmine, rpt_importance_vlabel, noquote))"
16824 +                 %if "&em_tree_surrexists" ne "" %then %do;
16825 +                   NSURROGATES  = "%sysfunc(sasmsg(sashelp.dmine, rpt_nsurrogates_vlabel, noquote))"
16826 +                 %end;
16827 +                 %if &validexist %then %do;
16828 +                   VIMPORTANCE = "%sysfunc(sasmsg(sashelp.dmine, rpt_vimportance_vlabel, noquote))"
16829 +                   RATIO       = "%sysfunc(sasmsg(sashelp.dmine, rpt_ratio_vlabel, noquote))"
16830 +                 %end;
16831 +                 %if "&EM_TREE_CVEXISTS" ne "" %then %do;
16832 +                   VIMPORTANCE = "%sysfunc(sasmsg(sashelp.dmine, rpt_vimportance_vlabel, noquote))"
16833 +                   CVIMPORTANCE =  "%sysfunc(sasmsg(sashelp.dmine, rpt_cvimport_vlabel, noquote))"
16834 +                   CVRULES= "%sysfunc(sasmsg(sashelp.dmine, rpt_cvrules_vlabel, noquote))"
16835 +                   RATIO = "%sysfunc(sasmsg(sashelp.dmine, rpt_ratio_vlabel, noquote))"
16836 +                 %end;
16837 +            ;
16838 +         run;
16840 +         %EM_REPORT(key=OUTIMPORT, viewtype=DATA, block=MODEL, description=IMPORTANCE, autodisplay=N);
16841 +      %end;
16842 +   %end;
16844 +   %doendm:
16845 +%mend em_tree_score;
NOTE: %INCLUDE (level 1) ending.
NOTE: Fileref TEMP has been deassigned.

NOTE: The file FLOWREF is:
      Filename=C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\EMFLOWSCORE.sas,
      RECFM=V,LRECL=20000,File Size (bytes)=0,
      Last Modified=21Apr2016:05:41:58,
      Create Time=21Apr2016:05:41:58

NOTE: 592 records were written to the file FLOWREF.
      The minimum record length was 1.
      The maximum record length was 75.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.00 seconds
      


NOTE: The file PUBREF is:
      Filename=C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\EMPUBLISHSCORE.sas,
      RECFM=V,LRECL=20000,File Size (bytes)=0,
      Last Modified=21Apr2016:05:41:58,
      Create Time=21Apr2016:05:41:58

NOTE: 587 records were written to the file PUBREF.
      The minimum record length was 1.
      The maximum record length was 75.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

NOTE: Fileref TREEFLOW has been deassigned.
NOTE: Fileref TREEPUB has been deassigned.

NOTE: There were 0 observations read from the data set EMWS1.IDS_TOTALSAL_DM.
      WHERE _TYPE_='DECPRIOR';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: The file FLOWREF is:
      Filename=C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\EMFLOWSCORE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=23566,
      Last Modified=21Apr2016:05:41:58,
      Create Time=21Apr2016:05:41:58

NOTE: 1 record was written to the file FLOWREF.
      The minimum record length was 12.
      The maximum record length was 12.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: The file PUBREF is:
      Filename=C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\EMPUBLISHSCORE.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=23393,
      Last Modified=21Apr2016:05:41:58,
      Create Time=21Apr2016:05:41:58

NOTE: 1 record was written to the file PUBREF.
      The minimum record length was 12.
      The maximum record length was 12.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

NOTE: Fileref FLOWREF has been deassigned.
NOTE: Fileref PUBREF has been deassigned.

NOTE: The data set WORK.EM_METACHANGE has 1 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      


NOTE: There were 1 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 2 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: There were 2 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 3 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: There were 3 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 4 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: There were 4 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 5 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: There were 5 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 6 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 6 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 7 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: There were 7 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 8 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      


NOTE: There were 8 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 9 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 9 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 10 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: There were 10 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 11 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: There were 1 observations read from the data set EMWS1.IDS_TOTALSAL_DM.
      WHERE _TYPE_='PREDICTED';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      


NOTE: There were 11 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 12 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      


NOTE: Variable cvimportance is uninitialized.
NOTE: Variable nsurrogates is uninitialized.
NOTE: There were 2 observations read from the data set EMWS1.TREE5_OUTIMPORT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      


NOTE: Variable NSURROGATES is uninitialized.
NOTE: Variable CVIMPORTANCE is uninitialized.
NOTE: Variable CVRULES is uninitialized.
NOTE: There were 12 observations read from the data set EMWS1.TREE5_OUTIMPORT.
NOTE: The data set EMWS1.TREE5_OUTIMPORT has 12 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      


NOTE: The data set WORK.EM_USER_REPORT has 132 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
      

16846  
16847  *------------------------------------------------------------*;
16848  * End SCORE: Tree5;
16849  *------------------------------------------------------------*;

16850  proc sort data=WORK.EM_METACHANGE;
16851  by key uname;
16852  run;

NOTE: There were 12 observations read from the data set WORK.EM_METACHANGE.
NOTE: The data set WORK.EM_METACHANGE has 12 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

16853  filename x "C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\CDELTA_TRAIN.sas";
16854  data _null_;
16855  file x;
16856  put 'if upcase(NAME) = "AGE" then do;';
16857  put 'ROLE = "REJECTED";';
16858  put 'end;';
16859  put 'else ';
16860  put 'if upcase(NAME) = "CAMPUS" then do;';
16861  put 'ROLE = "REJECTED";';
16862  put 'end;';
16863  put 'else ';
16864  put 'if upcase(NAME) = "DEPT" then do;';
16865  put 'ROLE = "REJECTED";';
16866  put 'end;';
16867  put 'else ';
16868  put 'if upcase(NAME) = "EMPLOYED" then do;';
16869  put 'ROLE = "REJECTED";';
16870  put 'end;';
16871  put 'else ';
16872  put 'if upcase(NAME) = "EXEMPT2" then do;';
16873  put 'ROLE = "REJECTED";';
16874  put 'end;';
16875  put 'else ';
16876  put 'if upcase(NAME) = "FTE" then do;';
16877  put 'ROLE = "REJECTED";';
16878  put 'end;';
16879  put 'else ';
16880  put 'if upcase(NAME) = "GENDER" then do;';
16881  put 'ROLE = "REJECTED";';
16882  put 'end;';
16883  put 'else ';
16884  put 'if upcase(NAME) = "POSITION" then do;';
16885  put 'ROLE = "REJECTED";';
16886  put 'end;';
16887  put 'else ';
16888  put 'if upcase(NAME) = "Q_TOTALSAL" then do;';
16889  put 'ROLE = "ASSESS";';
16890  put 'end;';
16891  put 'else ';
16892  put 'if upcase(NAME) = "STATUS" then do;';
16893  put 'ROLE = "REJECTED";';
16894  put 'end;';
16895  put 'else ';
16896  put 'if upcase(NAME) = "STSERVYR" then do;';
16897  put 'ROLE = "REJECTED";';
16898  put 'end;';
16899  put 'else ';
16900  put 'if upcase(NAME) = "_NODE_" then do;';
16901  put 'ROLE = "SEGMENT";';
16902  put 'LEVEL = "NOMINAL";';
16903  put 'end;';
16904  run;

NOTE: The file X is:
      Filename=C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\CDELTA_TRAIN.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=21Apr2016:05:42:03,
      Create Time=20Apr2016:23:09:29

NOTE: 48 records were written to the file X.
      The minimum record length was 4.
      The maximum record length was 39.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

16905  filename x;
NOTE: Fileref X has been deassigned.

16906  filename emflow "C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\EMFLOWSCORE.sas";
16907  *------------------------------------------------------------*;
16908  * Tree5: Scoring DATA data;
16909  *------------------------------------------------------------*;
16910  data EMWS1.Tree5_TRAIN
16911  / view=EMWS1.Tree5_TRAIN
16912  ;
16913  set EMWS1.Part_TRAIN
16914  ;
16915  %inc emflow;
NOTE: %INCLUDE (level 1) file EMFLOW is file C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\EMFLOWSCORE.sas.
16916 +****************************************************************;
16917 +******             DECISION TREE SCORING CODE             ******;
16918 +****************************************************************;
16919 +
16920 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
16921 +LENGTH _WARN_  $    4;
16922 +
16923 +******              LABELS FOR NEW VARIABLES              ******;
16924 +label _NODE_ = 'Node' ;
16925 +label _LEAF_ = 'Leaf' ;
16926 +label P_totalsal = 'Predicted: totalsal' ;
16927 +label V_totalsal = 'Validated: totalsal' ;
16928 +label R_totalsal = 'Residual: totalsal' ;
16929 +label _WARN_ = 'Warnings' ;
16930 +
16931 +
16932 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
16933 +LENGTH _ARBFMT_30 $     30; DROP _ARBFMT_30;
16934 +_ARBFMT_30 = ' '; /* Initialize to avoid warning. */
16935 +LENGTH _ARBFMT_28 $     28; DROP _ARBFMT_28;
16936 +_ARBFMT_28 = ' '; /* Initialize to avoid warning. */
16937 +
16938 +
16939 +******             ASSIGN OBSERVATION TO NODE             ******;
16940 +IF  NOT MISSING(nonstsal ) AND
16941 +                115051 <= nonstsal  THEN DO;
16942 +  IF  NOT MISSING(nonstsal ) AND
16943 +                257529.5 <= nonstsal  THEN DO;
16944 +    IF  NOT MISSING(nonstsal ) AND
16945 +                  319837.5 <= nonstsal  THEN DO;
16946 +      _NODE_  =                   15;
16947 +      _LEAF_  =                   62;
16948 +      P_totalsal  =             430459.4;
16949 +      V_totalsal  =     417005.789473684;
16950 +      END;
16951 +    ELSE DO;
16952 +      _NODE_  =                   14;
16953 +      _LEAF_  =                   61;
16954 +      P_totalsal  =     298051.519480519;
16955 +      V_totalsal  =         291616.96875;
16956 +      END;
16957 +    END;
16958 +  ELSE DO;
16959 +    IF  NOT MISSING(nonstsal ) AND
16960 +                    180203 <= nonstsal  THEN DO;
16961 +      IF  NOT MISSING(nonstsal ) AND
16962 +        nonstsal  <             209437.5 THEN DO;
16963 +        _NODE_  =                   26;
16964 +        _LEAF_  =                   59;
16965 +        P_totalsal  =     205348.279069767;
16966 +        V_totalsal  =     203595.418604651;
16967 +        END;
16968 +      ELSE DO;
16969 +        _NODE_  =                   27;
16970 +        _LEAF_  =                   60;
16971 +        P_totalsal  =     243136.530973451;
16972 +        V_totalsal  =     245666.222222222;
16973 +        END;
16974 +      END;
16975 +    ELSE DO;
16976 +      IF  NOT MISSING(statesal ) AND
16977 +                      7640.5 <= statesal  THEN DO;
16978 +        _NODE_  =                   25;
16979 +        _LEAF_  =                   58;
16980 +        P_totalsal  =     193310.744897959;
16981 +        V_totalsal  =     188562.465116279;
16982 +        END;
16983 +      ELSE DO;
16984 +        IF  NOT MISSING(nonstsal ) AND
16985 +                      148505.5 <= nonstsal  THEN DO;
16986 +          IF  NOT MISSING(nonstsal ) AND
16987 +            nonstsal  <               163762 THEN DO;
16988 +            _NODE_  =                   58;
16989 +            _LEAF_  =                   56;
16990 +            P_totalsal  =            155528.94;
16991 +            V_totalsal  =     155128.277777777;
16992 +            END;
16993 +          ELSE DO;
16994 +            _NODE_  =                   59;
16995 +            _LEAF_  =                   57;
16996 +            P_totalsal  =     172026.475409836;
16997 +            V_totalsal  =     173655.545454545;
16998 +            END;
16999 +          END;
17000 +        ELSE DO;
17001 +          IF  NOT MISSING(nonstsal ) AND
17002 +                        131707.5 <= nonstsal  THEN DO;
17003 +            _NODE_  =                   57;
17004 +            _LEAF_  =                   55;
17005 +            P_totalsal  =     140011.491525423;
17006 +            V_totalsal  =     140091.541666666;
17007 +            END;
17008 +          ELSE DO;
17009 +            _NODE_  =                   56;
17010 +            _LEAF_  =                   54;
17011 +            P_totalsal  =        123389.078125;
17012 +            V_totalsal  =     123918.555555555;
17013 +            END;
17014 +          END;
17015 +        END;
17016 +      END;
17017 +    END;
17018 +  END;
17019 +ELSE DO;
17020 +  IF  NOT MISSING(statesal ) AND
17021 +                   87510 <= statesal  THEN DO;
17022 +    IF  NOT MISSING(statesal ) AND
17023 +                    157105 <= statesal  THEN DO;
17024 +      IF  NOT MISSING(statesal ) AND
17025 +                      192854 <= statesal  THEN DO;
17026 +        _NODE_  =                   23;
17027 +        _LEAF_  =                   53;
17028 +        P_totalsal  =     264361.269230769;
17029 +        V_totalsal  =     268468.275862069;
17030 +        END;
17031 +      ELSE DO;
17032 +        _NODE_  =                   22;
17033 +        _LEAF_  =                   52;
17034 +        P_totalsal  =     188379.583333333;
17035 +        V_totalsal  =     197484.576923076;
17036 +        END;
17037 +      END;
17038 +    ELSE DO;
17039 +      IF  NOT MISSING(nonstsal ) AND
17040 +                     23033.5 <= nonstsal  THEN DO;
17041 +        IF  NOT MISSING(statesal ) AND
17042 +          statesal  <               111605 THEN DO;
17043 +          _NODE_  =                   36;
17044 +          _LEAF_  =                   50;
17045 +          P_totalsal  =     145322.421052631;
17046 +          V_totalsal  =     141973.761904761;
17047 +          END;
17048 +        ELSE DO;
17049 +          _NODE_  =                   37;
17050 +          _LEAF_  =                   51;
17051 +          P_totalsal  =     175551.742424242;
17052 +          V_totalsal  =     183700.727272727;
17053 +          END;
17054 +        END;
17055 +      ELSE DO;
17056 +        IF  NOT MISSING(statesal ) AND
17057 +                      117576.5 <= statesal  THEN DO;
17058 +          IF  NOT MISSING(statesal ) AND
17059 +                          136441 <= statesal  THEN DO;
17060 +            _NODE_  =                   55;
17061 +            _LEAF_  =                   49;
17062 +            P_totalsal  =     149342.807017543;
17063 +            V_totalsal  =     150521.045454545;
17064 +            END;
17065 +          ELSE DO;
17066 +            _NODE_  =                   54;
17067 +            _LEAF_  =                   48;
17068 +            P_totalsal  =     131039.036144578;
17069 +            V_totalsal  =         128212.84375;
17070 +            END;
17071 +          END;
17072 +        ELSE DO;
17073 +          IF  NOT MISSING(statesal ) AND
17074 +                        101772.5 <= statesal  THEN DO;
17075 +            IF  NOT MISSING(statesal ) AND
17076 +                            110326 <= statesal  THEN DO;
17077 +              _NODE_  =                   81;
17078 +              _LEAF_  =                   47;
17079 +              P_totalsal  =        117554.203125;
17080 +              V_totalsal  =            116456.85;
17081 +              END;
17082 +            ELSE DO;
17083 +              _NODE_  =                   80;
17084 +              _LEAF_  =                   46;
17085 +              P_totalsal  =     109521.424657534;
17086 +              V_totalsal  =     109758.829268292;
17087 +              END;
17088 +            END;
17089 +          ELSE DO;
17090 +            IF  NOT MISSING(statesal ) AND
17091 +                           95789.5 <= statesal  THEN DO;
17092 +              _NODE_  =                   79;
17093 +              _LEAF_  =                   45;
17094 +              P_totalsal  =     101223.018518518;
17095 +              V_totalsal  =          99647.84375;
17096 +              END;
17097 +            ELSE DO;
17098 +              IF  NOT MISSING(statesal ) AND
17099 +                               91975 <= statesal  THEN DO;
17100 +                _NODE_  =                  105;
17101 +                _LEAF_  =                   44;
17102 +                P_totalsal  =     95334.1960784313;
17103 +                V_totalsal  =             95030.85;
17104 +                END;
17105 +              ELSE DO;
17106 +                _NODE_  =                  104;
17107 +                _LEAF_  =                   43;
17108 +                P_totalsal  =     90711.1296296296;
17109 +                V_totalsal  =              91231.4;
17110 +                END;
17111 +              END;
17112 +            END;
17113 +          END;
17114 +        END;
17115 +      END;
17116 +    END;
17117 +  ELSE DO;
17118 +    IF  NOT MISSING(nonstsal ) AND
17119 +                     68358 <= nonstsal  THEN DO;
17120 +      IF  NOT MISSING(statesal ) AND
17121 +                       27171 <= statesal  THEN DO;
17122 +        _NODE_  =                   19;
17123 +        _LEAF_  =                   42;
17124 +        P_totalsal  =     142233.363636363;
17125 +        V_totalsal  =     138015.111111111;
17126 +        END;
17127 +      ELSE DO;
17128 +        IF  NOT MISSING(nonstsal ) AND
17129 +                       89303.5 <= nonstsal  THEN DO;
17130 +          IF  NOT MISSING(nonstsal ) AND
17131 +                        102882.5 <= nonstsal  THEN DO;
17132 +            _NODE_  =                   51;
17133 +            _LEAF_  =                   41;
17134 +            P_totalsal  =          111508.4125;
17135 +            V_totalsal  =     113460.117647058;
17136 +            END;
17137 +          ELSE DO;
17138 +            IF  NOT MISSING(nonstsal ) AND
17139 +                             95966 <= nonstsal  THEN DO;
17140 +              _NODE_  =                   77;
17141 +              _LEAF_  =                   40;
17142 +              P_totalsal  =     100421.356164383;
17143 +              V_totalsal  =     100345.344827586;
17144 +              END;
17145 +            ELSE DO;
17146 +              IF  NOT MISSING(nonstsal ) AND
17147 +                             92349.5 <= nonstsal  THEN DO;
17148 +                _NODE_  =                  103;
17149 +                _LEAF_  =                   39;
17150 +                P_totalsal  =              95371.3;
17151 +                V_totalsal  =            96703.375;
17152 +                END;
17153 +              ELSE DO;
17154 +                _NODE_  =                  102;
17155 +                _LEAF_  =                   38;
17156 +                P_totalsal  =     91942.7910447761;
17157 +                V_totalsal  =              90884.6;
17158 +                END;
17159 +              END;
17160 +            END;
17161 +          END;
17162 +        ELSE DO;
17163 +          IF  NOT MISSING(nonstsal ) AND
17164 +                           79396 <= nonstsal  THEN DO;
17165 +            IF  NOT MISSING(nonstsal ) AND
17166 +                           84951.5 <= nonstsal  THEN DO;
17167 +              _NODE_  =                   75;
17168 +              _LEAF_  =                   37;
17169 +              P_totalsal  =     87713.6266666666;
17170 +              V_totalsal  =          86818.59375;
17171 +              END;
17172 +            ELSE DO;
17173 +              IF  NOT MISSING(nonstsal ) AND
17174 +                               82225 <= nonstsal  THEN DO;
17175 +                _NODE_  =                  101;
17176 +                _LEAF_  =                   36;
17177 +                P_totalsal  =              83984.8;
17178 +                V_totalsal  =     85157.4782608695;
17179 +                END;
17180 +              ELSE DO;
17181 +                _NODE_  =                  100;
17182 +                _LEAF_  =                   35;
17183 +                P_totalsal  =     81679.0512820512;
17184 +                V_totalsal  =     81507.3636363636;
17185 +                END;
17186 +              END;
17187 +            END;
17188 +          ELSE DO;
17189 +            IF  NOT MISSING(nonstsal ) AND
17190 +                             73932 <= nonstsal  THEN DO;
17191 +              _NODE_  =                   73;
17192 +              _LEAF_  =                   34;
17193 +              P_totalsal  =     77790.8088235294;
17194 +              V_totalsal  =     77070.1896551724;
17195 +              END;
17196 +            ELSE DO;
17197 +              IF  NOT MISSING(nonstsal ) AND
17198 +                nonstsal  <                70266 THEN DO;
17199 +                _NODE_  =                   98;
17200 +                _LEAF_  =                   32;
17201 +                P_totalsal  =         70739.328125;
17202 +                V_totalsal  =             69560.12;
17203 +                END;
17204 +              ELSE DO;
17205 +                _NODE_  =                   99;
17206 +                _LEAF_  =                   33;
17207 +                P_totalsal  =     73731.6288659793;
17208 +                V_totalsal  =                73035;
17209 +                END;
17210 +              END;
17211 +            END;
17212 +          END;
17213 +        END;
17214 +      END;
17215 +    ELSE DO;
17216 +      IF  NOT MISSING(statesal ) AND
17217 +                     51742.5 <= statesal  THEN DO;
17218 +        IF  NOT MISSING(nonstsal ) AND
17219 +                       18694.5 <= nonstsal  THEN DO;
17220 +          _NODE_  =                   31;
17221 +          _LEAF_  =                   31;
17222 +          P_totalsal  =     105386.494949494;
17223 +          V_totalsal  =     113819.975609756;
17224 +          END;
17225 +        ELSE DO;
17226 +          IF  NOT MISSING(statesal ) AND
17227 +            statesal  <              66247.5 THEN DO;
17228 +            IF  NOT MISSING(statesal ) AND
17229 +                             59398 <= statesal  THEN DO;
17230 +              IF  NOT MISSING(statesal ) AND
17231 +                             63139.5 <= statesal  THEN DO;
17232 +                _NODE_  =                   93;
17233 +                _LEAF_  =                   25;
17234 +                P_totalsal  =     65855.1803278688;
17235 +                V_totalsal  =     65535.5142857143;
17236 +                END;
17237 +              ELSE DO;
17238 +                _NODE_  =                   92;
17239 +                _LEAF_  =                   24;
17240 +                P_totalsal  =                62329;
17241 +                V_totalsal  =     62293.6363636363;
17242 +                END;
17243 +              END;
17244 +            ELSE DO;
17245 +              IF  NOT MISSING(statesal ) AND
17246 +                statesal  <                54315 THEN DO;
17247 +                _NODE_  =                   90;
17248 +                _LEAF_  =                   22;
17249 +                P_totalsal  =     54687.5932203389;
17250 +                V_totalsal  =     55166.5151515151;
17251 +                END;
17252 +              ELSE DO;
17253 +                _NODE_  =                   91;
17254 +                _LEAF_  =                   23;
17255 +                P_totalsal  =     58492.0076335878;
17256 +                V_totalsal  =     58224.2903225806;
17257 +                END;
17258 +              END;
17259 +            END;
17260 +          ELSE DO;
17261 +            IF  NOT MISSING(statesal ) AND
17262 +                             77561 <= statesal  THEN DO;
17263 +              IF  NOT MISSING(statesal ) AND
17264 +                             82821.5 <= statesal  THEN DO;
17265 +                _NODE_  =                   97;
17266 +                _LEAF_  =                   30;
17267 +                P_totalsal  =              86975.4;
17268 +                V_totalsal  =     86406.1428571428;
17269 +                END;
17270 +              ELSE DO;
17271 +                _NODE_  =                   96;
17272 +                _LEAF_  =                   29;
17273 +                P_totalsal  =     81559.6236559139;
17274 +                V_totalsal  =     80036.2647058823;
17275 +                END;
17276 +              END;
17277 +            ELSE DO;
17278 +              IF  NOT MISSING(statesal ) AND
17279 +                statesal  <              71563.5 THEN DO;
17280 +                _NODE_  =                   94;
17281 +                _LEAF_  =                   26;
17282 +                P_totalsal  =     70544.2612612612;
17283 +                V_totalsal  =     71108.8409090909;
17284 +                END;
17285 +              ELSE DO;
17286 +                IF  NOT MISSING(statesal ) AND
17287 +                  statesal  <                74875 THEN DO;
17288 +                  _NODE_  =                  120;
17289 +                  _LEAF_  =                   27;
17290 +                  P_totalsal  =     73895.7868852459;
17291 +                  V_totalsal  =     75461.8484848484;
17292 +                  END;
17293 +                ELSE DO;
17294 +                  _NODE_  =                  121;
17295 +                  _LEAF_  =                   28;
17296 +                  P_totalsal  =     76233.8923076923;
17297 +                  V_totalsal  =     77924.7037037037;
17298 +                  END;
17299 +                END;
17300 +              END;
17301 +            END;
17302 +          END;
17303 +        END;
17304 +      ELSE DO;
17305 +        IF  NOT MISSING(nonstsal ) AND
17306 +                       47236.5 <= nonstsal  THEN DO;
17307 +          IF  NOT MISSING(nonstsal ) AND
17308 +                         57561.5 <= nonstsal  THEN DO;
17309 +            IF  NOT MISSING(nonstsal ) AND
17310 +                             64045 <= nonstsal  THEN DO;
17311 +              _NODE_  =                   67;
17312 +              _LEAF_  =                   21;
17313 +              P_totalsal  =     67651.3558282208;
17314 +              V_totalsal  =             67018.65;
17315 +              END;
17316 +            ELSE DO;
17317 +              _NODE_  =                   66;
17318 +              _LEAF_  =                   20;
17319 +              P_totalsal  =     62452.1654411764;
17320 +              V_totalsal  =     62460.6293103448;
17321 +              END;
17322 +            END;
17323 +          ELSE DO;
17324 +            _ARBFMT_28 = PUT( position , $28.);
17325 +             %DMNORMIP( _ARBFMT_28);
17326 +            IF _ARBFMT_28 IN ('OTHER' ,'ADMIN' ,'ASSISTANT OTHER' ,
17327 +            'BUILDING' ,'CLINICAL OTHER' ,'CLINICAL RESEARCH' ,'DATA' ,
17328 +            'EXECUTIVE' ,'RESEARCH OTHER' ,'OTHER PROGRAM' ,
17329 +            'PROJECT MANAGER' ,'RESEARCH ASSISTANT' ,'RESEARCH ASSOCIATE' ,
17330 +              'RESEARCH SPECIALIST' ,'RESEARCH TECHNICIAN' ) THEN DO;
17331 +              IF  NOT MISSING(nonstsal ) AND
17332 +                             52314.5 <= nonstsal  THEN DO;
17333 +                IF  NOT MISSING(nonstsal ) AND
17334 +                  nonstsal  <                54069 THEN DO;
17335 +                  _NODE_  =                  118;
17336 +                  _LEAF_  =                   17;
17337 +                  P_totalsal  =     53463.0326086956;
17338 +                  V_totalsal  =     53454.8205128205;
17339 +                  END;
17340 +                ELSE DO;
17341 +                  _NODE_  =                  119;
17342 +                  _LEAF_  =                   18;
17343 +                  P_totalsal  =     56112.2881355932;
17344 +                  V_totalsal  =     56244.7291666666;
17345 +                  END;
17346 +                END;
17347 +              ELSE DO;
17348 +                IF  NOT MISSING(nonstsal ) AND
17349 +                               50208.5 <= nonstsal  THEN DO;
17350 +                  _NODE_  =                  117;
17351 +                  _LEAF_  =                   16;
17352 +                  P_totalsal  =     51353.1333333333;
17353 +                  V_totalsal  =     51452.6818181818;
17354 +                  END;
17355 +                ELSE DO;
17356 +                  IF  NOT MISSING(nonstsal ) AND
17357 +                    nonstsal  <              48572.5 THEN DO;
17358 +                    _NODE_  =                  128;
17359 +                    _LEAF_  =                   14;
17360 +                    P_totalsal  =     48331.1384615384;
17361 +                    V_totalsal  =     48000.1891891891;
17362 +                    END;
17363 +                  ELSE DO;
17364 +                    _NODE_  =                  129;
17365 +                    _LEAF_  =                   15;
17366 +                    P_totalsal  =     49615.2093023255;
17367 +                    V_totalsal  =     49436.8378378378;
17368 +                    END;
17369 +                  END;
17370 +                END;
17371 +              END;
17372 +            ELSE DO;
17373 +              _NODE_  =                   65;
17374 +              _LEAF_  =                   19;
17375 +              P_totalsal  =             59423.75;
17376 +              V_totalsal  =     58581.1666666666;
17377 +              END;
17378 +            END;
17379 +          END;
17380 +        ELSE DO;
17381 +          IF  NOT MISSING(statesal ) AND
17382 +                         39899.5 <= statesal  THEN DO;
17383 +            IF  NOT MISSING(nonstsal ) AND
17384 +                           11020.5 <= nonstsal  THEN DO;
17385 +              _NODE_  =                   63;
17386 +              _LEAF_  =                   13;
17387 +              P_totalsal  =     70818.3703703703;
17388 +              V_totalsal  =            76347.125;
17389 +              END;
17390 +            ELSE DO;
17391 +              IF  NOT MISSING(statesal ) AND
17392 +                             46728.5 <= statesal  THEN DO;
17393 +                IF  NOT MISSING(statesal ) AND
17394 +                                 49470 <= statesal  THEN DO;
17395 +                  _NODE_  =                  115;
17396 +                  _LEAF_  =                   12;
17397 +                  P_totalsal  =     51269.5405405405;
17398 +                  V_totalsal  =     50776.3703703703;
17399 +                  END;
17400 +                ELSE DO;
17401 +                  _NODE_  =                  114;
17402 +                  _LEAF_  =                   11;
17403 +                  P_totalsal  =     48737.9183673469;
17404 +                  V_totalsal  =     48443.6041666666;
17405 +                  END;
17406 +                END;
17407 +              ELSE DO;
17408 +                IF  NOT MISSING(statesal ) AND
17409 +                                 43211 <= statesal  THEN DO;
17410 +                  IF  NOT MISSING(statesal ) AND
17411 +                                 44928.5 <= statesal  THEN DO;
17412 +                    _NODE_  =                  127;
17413 +                    _LEAF_  =                   10;
17414 +                    P_totalsal  =              45916.1;
17415 +                    V_totalsal  =     46094.6470588235;
17416 +                    END;
17417 +                  ELSE DO;
17418 +                    _NODE_  =                  126;
17419 +                    _LEAF_  =                    9;
17420 +                    P_totalsal  =     44672.6947368421;
17421 +                    V_totalsal  =     44674.4871794871;
17422 +                    END;
17423 +                  END;
17424 +                ELSE DO;
17425 +                  _NODE_  =                  112;
17426 +                  _LEAF_  =                    8;
17427 +                  P_totalsal  =     42302.3103448275;
17428 +                  V_totalsal  =      41848.527027027;
17429 +                  END;
17430 +                END;
17431 +              END;
17432 +            END;
17433 +          ELSE DO;
17434 +            IF  NOT MISSING(nonstsal ) AND
17435 +                             36731 <= nonstsal  THEN DO;
17436 +              IF  NOT MISSING(nonstsal ) AND
17437 +                nonstsal  <                41994 THEN DO;
17438 +                IF  NOT MISSING(nonstsal ) AND
17439 +                  nonstsal  <              39506.5 THEN DO;
17440 +                  _NODE_  =                  108;
17441 +                  _LEAF_  =                    5;
17442 +                  P_totalsal  =     39119.9294117647;
17443 +                  V_totalsal  =     38680.7432432432;
17444 +                  END;
17445 +                ELSE DO;
17446 +                  _NODE_  =                  109;
17447 +                  _LEAF_  =                    6;
17448 +                  P_totalsal  =      41742.612745098;
17449 +                  V_totalsal  =     42987.9304347826;
17450 +                  END;
17451 +                END;
17452 +              ELSE DO;
17453 +                _NODE_  =                   85;
17454 +                _LEAF_  =                    7;
17455 +                P_totalsal  =     45920.9526315789;
17456 +                V_totalsal  =      45435.050955414;
17457 +                END;
17458 +              END;
17459 +            ELSE DO;
17460 +              _ARBFMT_30 = PUT( exempt2 , $30.);
17461 +               %DMNORMIP( _ARBFMT_30);
17462 +              IF _ARBFMT_30 IN ('NON-PERMANENT' ) THEN DO;
17463 +                _NODE_  =                   83;
17464 +                _LEAF_  =                    4;
17465 +                P_totalsal  =     18065.0520833333;
17466 +                V_totalsal  =                16201;
17467 +                END;
17468 +              ELSE DO;
17469 +                IF  NOT MISSING(statesal ) AND
17470 +                               30203.5 <= statesal  THEN DO;
17471 +                  _NODE_  =                  107;
17472 +                  _LEAF_  =                    3;
17473 +                  P_totalsal  =     38949.9046153846;
17474 +                  V_totalsal  =     38674.6518518518;
17475 +                  END;
17476 +                ELSE DO;
17477 +                  IF  NOT MISSING(nonstsal ) AND
17478 +                    nonstsal  <                13312 THEN DO;
17479 +                    _NODE_  =                  122;
17480 +                    _LEAF_  =                    1;
17481 +                    P_totalsal  =      26887.873076923;
17482 +                    V_totalsal  =              27700.2;
17483 +                    END;
17484 +                  ELSE DO;
17485 +                    _NODE_  =                  123;
17486 +                    _LEAF_  =                    2;
17487 +                    P_totalsal  =     33620.4532258064;
17488 +                    V_totalsal  =     33052.4937238493;
17489 +                    END;
17490 +                  END;
17491 +                END;
17492 +              END;
17493 +            END;
17494 +          END;
17495 +        END;
17496 +      END;
17497 +    END;
17498 +  END;
17499 +
17500 +*****  RESIDUALS R_ *************;
17501 +IF MISSING( totalsal ) THEN R_totalsal  = .;
17502 +ELSE R_totalsal  = totalsal  - P_totalsal ;
17503 +
17504 +****************************************************************;
17505 +******          END OF DECISION TREE SCORING CODE         ******;
17506 +****************************************************************;
17507 +
17508 +drop _LEAF_;
NOTE: %INCLUDE (level 1) ending.
17509  run;

NOTE: DATA STEP view saved on file EMWS1.TREE5_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      

17510  quit;
17511  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

17512  filename emflow "C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\EMFLOWSCORE.sas";
17513  *------------------------------------------------------------*;
17514  * Tree5: Scoring VALIDATE data;
17515  *------------------------------------------------------------*;
17516  data EMWS1.Tree5_VALIDATE
17517  / view=EMWS1.Tree5_VALIDATE
17518  ;
17519  set EMWS1.Part_VALIDATE
17520  ;
17521  %inc emflow;
NOTE: %INCLUDE (level 1) file EMFLOW is file C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\EMFLOWSCORE.sas.
17522 +****************************************************************;
17523 +******             DECISION TREE SCORING CODE             ******;
17524 +****************************************************************;
17525 +
17526 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
17527 +LENGTH _WARN_  $    4;
17528 +
17529 +******              LABELS FOR NEW VARIABLES              ******;
17530 +label _NODE_ = 'Node' ;
17531 +label _LEAF_ = 'Leaf' ;
17532 +label P_totalsal = 'Predicted: totalsal' ;
17533 +label V_totalsal = 'Validated: totalsal' ;
17534 +label R_totalsal = 'Residual: totalsal' ;
17535 +label _WARN_ = 'Warnings' ;
17536 +
17537 +
17538 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
17539 +LENGTH _ARBFMT_30 $     30; DROP _ARBFMT_30;
17540 +_ARBFMT_30 = ' '; /* Initialize to avoid warning. */
17541 +LENGTH _ARBFMT_28 $     28; DROP _ARBFMT_28;
17542 +_ARBFMT_28 = ' '; /* Initialize to avoid warning. */
17543 +
17544 +
17545 +******             ASSIGN OBSERVATION TO NODE             ******;
17546 +IF  NOT MISSING(nonstsal ) AND
17547 +                115051 <= nonstsal  THEN DO;
17548 +  IF  NOT MISSING(nonstsal ) AND
17549 +                257529.5 <= nonstsal  THEN DO;
17550 +    IF  NOT MISSING(nonstsal ) AND
17551 +                  319837.5 <= nonstsal  THEN DO;
17552 +      _NODE_  =                   15;
17553 +      _LEAF_  =                   62;
17554 +      P_totalsal  =             430459.4;
17555 +      V_totalsal  =     417005.789473684;
17556 +      END;
17557 +    ELSE DO;
17558 +      _NODE_  =                   14;
17559 +      _LEAF_  =                   61;
17560 +      P_totalsal  =     298051.519480519;
17561 +      V_totalsal  =         291616.96875;
17562 +      END;
17563 +    END;
17564 +  ELSE DO;
17565 +    IF  NOT MISSING(nonstsal ) AND
17566 +                    180203 <= nonstsal  THEN DO;
17567 +      IF  NOT MISSING(nonstsal ) AND
17568 +        nonstsal  <             209437.5 THEN DO;
17569 +        _NODE_  =                   26;
17570 +        _LEAF_  =                   59;
17571 +        P_totalsal  =     205348.279069767;
17572 +        V_totalsal  =     203595.418604651;
17573 +        END;
17574 +      ELSE DO;
17575 +        _NODE_  =                   27;
17576 +        _LEAF_  =                   60;
17577 +        P_totalsal  =     243136.530973451;
17578 +        V_totalsal  =     245666.222222222;
17579 +        END;
17580 +      END;
17581 +    ELSE DO;
17582 +      IF  NOT MISSING(statesal ) AND
17583 +                      7640.5 <= statesal  THEN DO;
17584 +        _NODE_  =                   25;
17585 +        _LEAF_  =                   58;
17586 +        P_totalsal  =     193310.744897959;
17587 +        V_totalsal  =     188562.465116279;
17588 +        END;
17589 +      ELSE DO;
17590 +        IF  NOT MISSING(nonstsal ) AND
17591 +                      148505.5 <= nonstsal  THEN DO;
17592 +          IF  NOT MISSING(nonstsal ) AND
17593 +            nonstsal  <               163762 THEN DO;
17594 +            _NODE_  =                   58;
17595 +            _LEAF_  =                   56;
17596 +            P_totalsal  =            155528.94;
17597 +            V_totalsal  =     155128.277777777;
17598 +            END;
17599 +          ELSE DO;
17600 +            _NODE_  =                   59;
17601 +            _LEAF_  =                   57;
17602 +            P_totalsal  =     172026.475409836;
17603 +            V_totalsal  =     173655.545454545;
17604 +            END;
17605 +          END;
17606 +        ELSE DO;
17607 +          IF  NOT MISSING(nonstsal ) AND
17608 +                        131707.5 <= nonstsal  THEN DO;
17609 +            _NODE_  =                   57;
17610 +            _LEAF_  =                   55;
17611 +            P_totalsal  =     140011.491525423;
17612 +            V_totalsal  =     140091.541666666;
17613 +            END;
17614 +          ELSE DO;
17615 +            _NODE_  =                   56;
17616 +            _LEAF_  =                   54;
17617 +            P_totalsal  =        123389.078125;
17618 +            V_totalsal  =     123918.555555555;
17619 +            END;
17620 +          END;
17621 +        END;
17622 +      END;
17623 +    END;
17624 +  END;
17625 +ELSE DO;
17626 +  IF  NOT MISSING(statesal ) AND
17627 +                   87510 <= statesal  THEN DO;
17628 +    IF  NOT MISSING(statesal ) AND
17629 +                    157105 <= statesal  THEN DO;
17630 +      IF  NOT MISSING(statesal ) AND
17631 +                      192854 <= statesal  THEN DO;
17632 +        _NODE_  =                   23;
17633 +        _LEAF_  =                   53;
17634 +        P_totalsal  =     264361.269230769;
17635 +        V_totalsal  =     268468.275862069;
17636 +        END;
17637 +      ELSE DO;
17638 +        _NODE_  =                   22;
17639 +        _LEAF_  =                   52;
17640 +        P_totalsal  =     188379.583333333;
17641 +        V_totalsal  =     197484.576923076;
17642 +        END;
17643 +      END;
17644 +    ELSE DO;
17645 +      IF  NOT MISSING(nonstsal ) AND
17646 +                     23033.5 <= nonstsal  THEN DO;
17647 +        IF  NOT MISSING(statesal ) AND
17648 +          statesal  <               111605 THEN DO;
17649 +          _NODE_  =                   36;
17650 +          _LEAF_  =                   50;
17651 +          P_totalsal  =     145322.421052631;
17652 +          V_totalsal  =     141973.761904761;
17653 +          END;
17654 +        ELSE DO;
17655 +          _NODE_  =                   37;
17656 +          _LEAF_  =                   51;
17657 +          P_totalsal  =     175551.742424242;
17658 +          V_totalsal  =     183700.727272727;
17659 +          END;
17660 +        END;
17661 +      ELSE DO;
17662 +        IF  NOT MISSING(statesal ) AND
17663 +                      117576.5 <= statesal  THEN DO;
17664 +          IF  NOT MISSING(statesal ) AND
17665 +                          136441 <= statesal  THEN DO;
17666 +            _NODE_  =                   55;
17667 +            _LEAF_  =                   49;
17668 +            P_totalsal  =     149342.807017543;
17669 +            V_totalsal  =     150521.045454545;
17670 +            END;
17671 +          ELSE DO;
17672 +            _NODE_  =                   54;
17673 +            _LEAF_  =                   48;
17674 +            P_totalsal  =     131039.036144578;
17675 +            V_totalsal  =         128212.84375;
17676 +            END;
17677 +          END;
17678 +        ELSE DO;
17679 +          IF  NOT MISSING(statesal ) AND
17680 +                        101772.5 <= statesal  THEN DO;
17681 +            IF  NOT MISSING(statesal ) AND
17682 +                            110326 <= statesal  THEN DO;
17683 +              _NODE_  =                   81;
17684 +              _LEAF_  =                   47;
17685 +              P_totalsal  =        117554.203125;
17686 +              V_totalsal  =            116456.85;
17687 +              END;
17688 +            ELSE DO;
17689 +              _NODE_  =                   80;
17690 +              _LEAF_  =                   46;
17691 +              P_totalsal  =     109521.424657534;
17692 +              V_totalsal  =     109758.829268292;
17693 +              END;
17694 +            END;
17695 +          ELSE DO;
17696 +            IF  NOT MISSING(statesal ) AND
17697 +                           95789.5 <= statesal  THEN DO;
17698 +              _NODE_  =                   79;
17699 +              _LEAF_  =                   45;
17700 +              P_totalsal  =     101223.018518518;
17701 +              V_totalsal  =          99647.84375;
17702 +              END;
17703 +            ELSE DO;
17704 +              IF  NOT MISSING(statesal ) AND
17705 +                               91975 <= statesal  THEN DO;
17706 +                _NODE_  =                  105;
17707 +                _LEAF_  =                   44;
17708 +                P_totalsal  =     95334.1960784313;
17709 +                V_totalsal  =             95030.85;
17710 +                END;
17711 +              ELSE DO;
17712 +                _NODE_  =                  104;
17713 +                _LEAF_  =                   43;
17714 +                P_totalsal  =     90711.1296296296;
17715 +                V_totalsal  =              91231.4;
17716 +                END;
17717 +              END;
17718 +            END;
17719 +          END;
17720 +        END;
17721 +      END;
17722 +    END;
17723 +  ELSE DO;
17724 +    IF  NOT MISSING(nonstsal ) AND
17725 +                     68358 <= nonstsal  THEN DO;
17726 +      IF  NOT MISSING(statesal ) AND
17727 +                       27171 <= statesal  THEN DO;
17728 +        _NODE_  =                   19;
17729 +        _LEAF_  =                   42;
17730 +        P_totalsal  =     142233.363636363;
17731 +        V_totalsal  =     138015.111111111;
17732 +        END;
17733 +      ELSE DO;
17734 +        IF  NOT MISSING(nonstsal ) AND
17735 +                       89303.5 <= nonstsal  THEN DO;
17736 +          IF  NOT MISSING(nonstsal ) AND
17737 +                        102882.5 <= nonstsal  THEN DO;
17738 +            _NODE_  =                   51;
17739 +            _LEAF_  =                   41;
17740 +            P_totalsal  =          111508.4125;
17741 +            V_totalsal  =     113460.117647058;
17742 +            END;
17743 +          ELSE DO;
17744 +            IF  NOT MISSING(nonstsal ) AND
17745 +                             95966 <= nonstsal  THEN DO;
17746 +              _NODE_  =                   77;
17747 +              _LEAF_  =                   40;
17748 +              P_totalsal  =     100421.356164383;
17749 +              V_totalsal  =     100345.344827586;
17750 +              END;
17751 +            ELSE DO;
17752 +              IF  NOT MISSING(nonstsal ) AND
17753 +                             92349.5 <= nonstsal  THEN DO;
17754 +                _NODE_  =                  103;
17755 +                _LEAF_  =                   39;
17756 +                P_totalsal  =              95371.3;
17757 +                V_totalsal  =            96703.375;
17758 +                END;
17759 +              ELSE DO;
17760 +                _NODE_  =                  102;
17761 +                _LEAF_  =                   38;
17762 +                P_totalsal  =     91942.7910447761;
17763 +                V_totalsal  =              90884.6;
17764 +                END;
17765 +              END;
17766 +            END;
17767 +          END;
17768 +        ELSE DO;
17769 +          IF  NOT MISSING(nonstsal ) AND
17770 +                           79396 <= nonstsal  THEN DO;
17771 +            IF  NOT MISSING(nonstsal ) AND
17772 +                           84951.5 <= nonstsal  THEN DO;
17773 +              _NODE_  =                   75;
17774 +              _LEAF_  =                   37;
17775 +              P_totalsal  =     87713.6266666666;
17776 +              V_totalsal  =          86818.59375;
17777 +              END;
17778 +            ELSE DO;
17779 +              IF  NOT MISSING(nonstsal ) AND
17780 +                               82225 <= nonstsal  THEN DO;
17781 +                _NODE_  =                  101;
17782 +                _LEAF_  =                   36;
17783 +                P_totalsal  =              83984.8;
17784 +                V_totalsal  =     85157.4782608695;
17785 +                END;
17786 +              ELSE DO;
17787 +                _NODE_  =                  100;
17788 +                _LEAF_  =                   35;
17789 +                P_totalsal  =     81679.0512820512;
17790 +                V_totalsal  =     81507.3636363636;
17791 +                END;
17792 +              END;
17793 +            END;
17794 +          ELSE DO;
17795 +            IF  NOT MISSING(nonstsal ) AND
17796 +                             73932 <= nonstsal  THEN DO;
17797 +              _NODE_  =                   73;
17798 +              _LEAF_  =                   34;
17799 +              P_totalsal  =     77790.8088235294;
17800 +              V_totalsal  =     77070.1896551724;
17801 +              END;
17802 +            ELSE DO;
17803 +              IF  NOT MISSING(nonstsal ) AND
17804 +                nonstsal  <                70266 THEN DO;
17805 +                _NODE_  =                   98;
17806 +                _LEAF_  =                   32;
17807 +                P_totalsal  =         70739.328125;
17808 +                V_totalsal  =             69560.12;
17809 +                END;
17810 +              ELSE DO;
17811 +                _NODE_  =                   99;
17812 +                _LEAF_  =                   33;
17813 +                P_totalsal  =     73731.6288659793;
17814 +                V_totalsal  =                73035;
17815 +                END;
17816 +              END;
17817 +            END;
17818 +          END;
17819 +        END;
17820 +      END;
17821 +    ELSE DO;
17822 +      IF  NOT MISSING(statesal ) AND
17823 +                     51742.5 <= statesal  THEN DO;
17824 +        IF  NOT MISSING(nonstsal ) AND
17825 +                       18694.5 <= nonstsal  THEN DO;
17826 +          _NODE_  =                   31;
17827 +          _LEAF_  =                   31;
17828 +          P_totalsal  =     105386.494949494;
17829 +          V_totalsal  =     113819.975609756;
17830 +          END;
17831 +        ELSE DO;
17832 +          IF  NOT MISSING(statesal ) AND
17833 +            statesal  <              66247.5 THEN DO;
17834 +            IF  NOT MISSING(statesal ) AND
17835 +                             59398 <= statesal  THEN DO;
17836 +              IF  NOT MISSING(statesal ) AND
17837 +                             63139.5 <= statesal  THEN DO;
17838 +                _NODE_  =                   93;
17839 +                _LEAF_  =                   25;
17840 +                P_totalsal  =     65855.1803278688;
17841 +                V_totalsal  =     65535.5142857143;
17842 +                END;
17843 +              ELSE DO;
17844 +                _NODE_  =                   92;
17845 +                _LEAF_  =                   24;
17846 +                P_totalsal  =                62329;
17847 +                V_totalsal  =     62293.6363636363;
17848 +                END;
17849 +              END;
17850 +            ELSE DO;
17851 +              IF  NOT MISSING(statesal ) AND
17852 +                statesal  <                54315 THEN DO;
17853 +                _NODE_  =                   90;
17854 +                _LEAF_  =                   22;
17855 +                P_totalsal  =     54687.5932203389;
17856 +                V_totalsal  =     55166.5151515151;
17857 +                END;
17858 +              ELSE DO;
17859 +                _NODE_  =                   91;
17860 +                _LEAF_  =                   23;
17861 +                P_totalsal  =     58492.0076335878;
17862 +                V_totalsal  =     58224.2903225806;
17863 +                END;
17864 +              END;
17865 +            END;
17866 +          ELSE DO;
17867 +            IF  NOT MISSING(statesal ) AND
17868 +                             77561 <= statesal  THEN DO;
17869 +              IF  NOT MISSING(statesal ) AND
17870 +                             82821.5 <= statesal  THEN DO;
17871 +                _NODE_  =                   97;
17872 +                _LEAF_  =                   30;
17873 +                P_totalsal  =              86975.4;
17874 +                V_totalsal  =     86406.1428571428;
17875 +                END;
17876 +              ELSE DO;
17877 +                _NODE_  =                   96;
17878 +                _LEAF_  =                   29;
17879 +                P_totalsal  =     81559.6236559139;
17880 +                V_totalsal  =     80036.2647058823;
17881 +                END;
17882 +              END;
17883 +            ELSE DO;
17884 +              IF  NOT MISSING(statesal ) AND
17885 +                statesal  <              71563.5 THEN DO;
17886 +                _NODE_  =                   94;
17887 +                _LEAF_  =                   26;
17888 +                P_totalsal  =     70544.2612612612;
17889 +                V_totalsal  =     71108.8409090909;
17890 +                END;
17891 +              ELSE DO;
17892 +                IF  NOT MISSING(statesal ) AND
17893 +                  statesal  <                74875 THEN DO;
17894 +                  _NODE_  =                  120;
17895 +                  _LEAF_  =                   27;
17896 +                  P_totalsal  =     73895.7868852459;
17897 +                  V_totalsal  =     75461.8484848484;
17898 +                  END;
17899 +                ELSE DO;
17900 +                  _NODE_  =                  121;
17901 +                  _LEAF_  =                   28;
17902 +                  P_totalsal  =     76233.8923076923;
17903 +                  V_totalsal  =     77924.7037037037;
17904 +                  END;
17905 +                END;
17906 +              END;
17907 +            END;
17908 +          END;
17909 +        END;
17910 +      ELSE DO;
17911 +        IF  NOT MISSING(nonstsal ) AND
17912 +                       47236.5 <= nonstsal  THEN DO;
17913 +          IF  NOT MISSING(nonstsal ) AND
17914 +                         57561.5 <= nonstsal  THEN DO;
17915 +            IF  NOT MISSING(nonstsal ) AND
17916 +                             64045 <= nonstsal  THEN DO;
17917 +              _NODE_  =                   67;
17918 +              _LEAF_  =                   21;
17919 +              P_totalsal  =     67651.3558282208;
17920 +              V_totalsal  =             67018.65;
17921 +              END;
17922 +            ELSE DO;
17923 +              _NODE_  =                   66;
17924 +              _LEAF_  =                   20;
17925 +              P_totalsal  =     62452.1654411764;
17926 +              V_totalsal  =     62460.6293103448;
17927 +              END;
17928 +            END;
17929 +          ELSE DO;
17930 +            _ARBFMT_28 = PUT( position , $28.);
17931 +             %DMNORMIP( _ARBFMT_28);
17932 +            IF _ARBFMT_28 IN ('OTHER' ,'ADMIN' ,'ASSISTANT OTHER' ,
17933 +            'BUILDING' ,'CLINICAL OTHER' ,'CLINICAL RESEARCH' ,'DATA' ,
17934 +            'EXECUTIVE' ,'RESEARCH OTHER' ,'OTHER PROGRAM' ,
17935 +            'PROJECT MANAGER' ,'RESEARCH ASSISTANT' ,'RESEARCH ASSOCIATE' ,
17936 +              'RESEARCH SPECIALIST' ,'RESEARCH TECHNICIAN' ) THEN DO;
17937 +              IF  NOT MISSING(nonstsal ) AND
17938 +                             52314.5 <= nonstsal  THEN DO;
17939 +                IF  NOT MISSING(nonstsal ) AND
17940 +                  nonstsal  <                54069 THEN DO;
17941 +                  _NODE_  =                  118;
17942 +                  _LEAF_  =                   17;
17943 +                  P_totalsal  =     53463.0326086956;
17944 +                  V_totalsal  =     53454.8205128205;
17945 +                  END;
17946 +                ELSE DO;
17947 +                  _NODE_  =                  119;
17948 +                  _LEAF_  =                   18;
17949 +                  P_totalsal  =     56112.2881355932;
17950 +                  V_totalsal  =     56244.7291666666;
17951 +                  END;
17952 +                END;
17953 +              ELSE DO;
17954 +                IF  NOT MISSING(nonstsal ) AND
17955 +                               50208.5 <= nonstsal  THEN DO;
17956 +                  _NODE_  =                  117;
17957 +                  _LEAF_  =                   16;
17958 +                  P_totalsal  =     51353.1333333333;
17959 +                  V_totalsal  =     51452.6818181818;
17960 +                  END;
17961 +                ELSE DO;
17962 +                  IF  NOT MISSING(nonstsal ) AND
17963 +                    nonstsal  <              48572.5 THEN DO;
17964 +                    _NODE_  =                  128;
17965 +                    _LEAF_  =                   14;
17966 +                    P_totalsal  =     48331.1384615384;
17967 +                    V_totalsal  =     48000.1891891891;
17968 +                    END;
17969 +                  ELSE DO;
17970 +                    _NODE_  =                  129;
17971 +                    _LEAF_  =                   15;
17972 +                    P_totalsal  =     49615.2093023255;
17973 +                    V_totalsal  =     49436.8378378378;
17974 +                    END;
17975 +                  END;
17976 +                END;
17977 +              END;
17978 +            ELSE DO;
17979 +              _NODE_  =                   65;
17980 +              _LEAF_  =                   19;
17981 +              P_totalsal  =             59423.75;
17982 +              V_totalsal  =     58581.1666666666;
17983 +              END;
17984 +            END;
17985 +          END;
17986 +        ELSE DO;
17987 +          IF  NOT MISSING(statesal ) AND
17988 +                         39899.5 <= statesal  THEN DO;
17989 +            IF  NOT MISSING(nonstsal ) AND
17990 +                           11020.5 <= nonstsal  THEN DO;
17991 +              _NODE_  =                   63;
17992 +              _LEAF_  =                   13;
17993 +              P_totalsal  =     70818.3703703703;
17994 +              V_totalsal  =            76347.125;
17995 +              END;
17996 +            ELSE DO;
17997 +              IF  NOT MISSING(statesal ) AND
17998 +                             46728.5 <= statesal  THEN DO;
17999 +                IF  NOT MISSING(statesal ) AND
18000 +                                 49470 <= statesal  THEN DO;
18001 +                  _NODE_  =                  115;
18002 +                  _LEAF_  =                   12;
18003 +                  P_totalsal  =     51269.5405405405;
18004 +                  V_totalsal  =     50776.3703703703;
18005 +                  END;
18006 +                ELSE DO;
18007 +                  _NODE_  =                  114;
18008 +                  _LEAF_  =                   11;
18009 +                  P_totalsal  =     48737.9183673469;
18010 +                  V_totalsal  =     48443.6041666666;
18011 +                  END;
18012 +                END;
18013 +              ELSE DO;
18014 +                IF  NOT MISSING(statesal ) AND
18015 +                                 43211 <= statesal  THEN DO;
18016 +                  IF  NOT MISSING(statesal ) AND
18017 +                                 44928.5 <= statesal  THEN DO;
18018 +                    _NODE_  =                  127;
18019 +                    _LEAF_  =                   10;
18020 +                    P_totalsal  =              45916.1;
18021 +                    V_totalsal  =     46094.6470588235;
18022 +                    END;
18023 +                  ELSE DO;
18024 +                    _NODE_  =                  126;
18025 +                    _LEAF_  =                    9;
18026 +                    P_totalsal  =     44672.6947368421;
18027 +                    V_totalsal  =     44674.4871794871;
18028 +                    END;
18029 +                  END;
18030 +                ELSE DO;
18031 +                  _NODE_  =                  112;
18032 +                  _LEAF_  =                    8;
18033 +                  P_totalsal  =     42302.3103448275;
18034 +                  V_totalsal  =      41848.527027027;
18035 +                  END;
18036 +                END;
18037 +              END;
18038 +            END;
18039 +          ELSE DO;
18040 +            IF  NOT MISSING(nonstsal ) AND
18041 +                             36731 <= nonstsal  THEN DO;
18042 +              IF  NOT MISSING(nonstsal ) AND
18043 +                nonstsal  <                41994 THEN DO;
18044 +                IF  NOT MISSING(nonstsal ) AND
18045 +                  nonstsal  <              39506.5 THEN DO;
18046 +                  _NODE_  =                  108;
18047 +                  _LEAF_  =                    5;
18048 +                  P_totalsal  =     39119.9294117647;
18049 +                  V_totalsal  =     38680.7432432432;
18050 +                  END;
18051 +                ELSE DO;
18052 +                  _NODE_  =                  109;
18053 +                  _LEAF_  =                    6;
18054 +                  P_totalsal  =      41742.612745098;
18055 +                  V_totalsal  =     42987.9304347826;
18056 +                  END;
18057 +                END;
18058 +              ELSE DO;
18059 +                _NODE_  =                   85;
18060 +                _LEAF_  =                    7;
18061 +                P_totalsal  =     45920.9526315789;
18062 +                V_totalsal  =      45435.050955414;
18063 +                END;
18064 +              END;
18065 +            ELSE DO;
18066 +              _ARBFMT_30 = PUT( exempt2 , $30.);
18067 +               %DMNORMIP( _ARBFMT_30);
18068 +              IF _ARBFMT_30 IN ('NON-PERMANENT' ) THEN DO;
18069 +                _NODE_  =                   83;
18070 +                _LEAF_  =                    4;
18071 +                P_totalsal  =     18065.0520833333;
18072 +                V_totalsal  =                16201;
18073 +                END;
18074 +              ELSE DO;
18075 +                IF  NOT MISSING(statesal ) AND
18076 +                               30203.5 <= statesal  THEN DO;
18077 +                  _NODE_  =                  107;
18078 +                  _LEAF_  =                    3;
18079 +                  P_totalsal  =     38949.9046153846;
18080 +                  V_totalsal  =     38674.6518518518;
18081 +                  END;
18082 +                ELSE DO;
18083 +                  IF  NOT MISSING(nonstsal ) AND
18084 +                    nonstsal  <                13312 THEN DO;
18085 +                    _NODE_  =                  122;
18086 +                    _LEAF_  =                    1;
18087 +                    P_totalsal  =      26887.873076923;
18088 +                    V_totalsal  =              27700.2;
18089 +                    END;
18090 +                  ELSE DO;
18091 +                    _NODE_  =                  123;
18092 +                    _LEAF_  =                    2;
18093 +                    P_totalsal  =     33620.4532258064;
18094 +                    V_totalsal  =     33052.4937238493;
18095 +                    END;
18096 +                  END;
18097 +                END;
18098 +              END;
18099 +            END;
18100 +          END;
18101 +        END;
18102 +      END;
18103 +    END;
18104 +  END;
18105 +
18106 +*****  RESIDUALS R_ *************;
18107 +IF MISSING( totalsal ) THEN R_totalsal  = .;
18108 +ELSE R_totalsal  = totalsal  - P_totalsal ;
18109 +
18110 +****************************************************************;
18111 +******          END OF DECISION TREE SCORING CODE         ******;
18112 +****************************************************************;
18113 +
18114 +drop _LEAF_;
NOTE: %INCLUDE (level 1) ending.
18115  run;

NOTE: DATA STEP view saved on file EMWS1.TREE5_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

18116  quit;
18117  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

18118  filename emflow "C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\EMFLOWSCORE.sas";
18119  *------------------------------------------------------------*;
18120  * Tree5: Scoring TEST data;
18121  *------------------------------------------------------------*;
18122  data EMWS1.Tree5_TEST
18123  / view=EMWS1.Tree5_TEST
18124  ;
18125  set EMWS1.Part_TEST
18126  ;
18127  %inc emflow;
NOTE: %INCLUDE (level 1) file EMFLOW is file C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\458 FINAL PROJECT\UNC SALARY SYSTEM\Workspaces\EMWS1\Tree5\EMFLOWSCORE.sas.
18128 +****************************************************************;
18129 +******             DECISION TREE SCORING CODE             ******;
18130 +****************************************************************;
18131 +
18132 +******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
18133 +LENGTH _WARN_  $    4;
18134 +
18135 +******              LABELS FOR NEW VARIABLES              ******;
18136 +label _NODE_ = 'Node' ;
18137 +label _LEAF_ = 'Leaf' ;
18138 +label P_totalsal = 'Predicted: totalsal' ;
18139 +label V_totalsal = 'Validated: totalsal' ;
18140 +label R_totalsal = 'Residual: totalsal' ;
18141 +label _WARN_ = 'Warnings' ;
18142 +
18143 +
18144 +******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
18145 +LENGTH _ARBFMT_30 $     30; DROP _ARBFMT_30;
18146 +_ARBFMT_30 = ' '; /* Initialize to avoid warning. */
18147 +LENGTH _ARBFMT_28 $     28; DROP _ARBFMT_28;
18148 +_ARBFMT_28 = ' '; /* Initialize to avoid warning. */
18149 +
18150 +
18151 +******             ASSIGN OBSERVATION TO NODE             ******;
18152 +IF  NOT MISSING(nonstsal ) AND
18153 +                115051 <= nonstsal  THEN DO;
18154 +  IF  NOT MISSING(nonstsal ) AND
18155 +                257529.5 <= nonstsal  THEN DO;
18156 +    IF  NOT MISSING(nonstsal ) AND
18157 +                  319837.5 <= nonstsal  THEN DO;
18158 +      _NODE_  =                   15;
18159 +      _LEAF_  =                   62;
18160 +      P_totalsal  =             430459.4;
18161 +      V_totalsal  =     417005.789473684;
18162 +      END;
18163 +    ELSE DO;
18164 +      _NODE_  =                   14;
18165 +      _LEAF_  =                   61;
18166 +      P_totalsal  =     298051.519480519;
18167 +      V_totalsal  =         291616.96875;
18168 +      END;
18169 +    END;
18170 +  ELSE DO;
18171 +    IF  NOT MISSING(nonstsal ) AND
18172 +                    180203 <= nonstsal  THEN DO;
18173 +      IF  NOT MISSING(nonstsal ) AND
18174 +        nonstsal  <             209437.5 THEN DO;
18175 +        _NODE_  =                   26;
18176 +        _LEAF_  =                   59;
18177 +        P_totalsal  =     205348.279069767;
18178 +        V_totalsal  =     203595.418604651;
18179 +        END;
18180 +      ELSE DO;
18181 +        _NODE_  =                   27;
18182 +        _LEAF_  =                   60;
18183 +        P_totalsal  =     243136.530973451;
18184 +        V_totalsal  =     245666.222222222;
18185 +        END;
18186 +      END;
18187 +    ELSE DO;
18188 +      IF  NOT MISSING(statesal ) AND
18189 +                      7640.5 <= statesal  THEN DO;
18190 +        _NODE_  =                   25;
18191 +        _LEAF_  =                   58;
18192 +        P_totalsal  =     193310.744897959;
18193 +        V_totalsal  =     188562.465116279;
18194 +        END;
18195 +      ELSE DO;
18196 +        IF  NOT MISSING(nonstsal ) AND
18197 +                      148505.5 <= nonstsal  THEN DO;
18198 +          IF  NOT MISSING(nonstsal ) AND
18199 +            nonstsal  <               163762 THEN DO;
18200 +            _NODE_  =                   58;
18201 +            _LEAF_  =                   56;
18202 +            P_totalsal  =            155528.94;
18203 +            V_totalsal  =     155128.277777777;
18204 +            END;
18205 +          ELSE DO;
18206 +            _NODE_  =                   59;
18207 +            _LEAF_  =                   57;
18208 +            P_totalsal  =     172026.475409836;
18209 +            V_totalsal  =     173655.545454545;
18210 +            END;
18211 +          END;
18212 +        ELSE DO;
18213 +          IF  NOT MISSING(nonstsal ) AND
18214 +                        131707.5 <= nonstsal  THEN DO;
18215 +            _NODE_  =                   57;
18216 +            _LEAF_  =                   55;
18217 +            P_totalsal  =     140011.491525423;
18218 +            V_totalsal  =     140091.541666666;
18219 +            END;
18220 +          ELSE DO;
18221 +            _NODE_  =                   56;
18222 +            _LEAF_  =                   54;
18223 +            P_totalsal  =        123389.078125;
18224 +            V_totalsal  =     123918.555555555;
18225 +            END;
18226 +          END;
18227 +        END;
18228 +      END;
18229 +    END;
18230 +  END;
18231 +ELSE DO;
18232 +  IF  NOT MISSING(statesal ) AND
18233 +                   87510 <= statesal  THEN DO;
18234 +    IF  NOT MISSING(statesal ) AND
18235 +                    157105 <= statesal  THEN DO;
18236 +      IF  NOT MISSING(statesal ) AND
18237 +                      192854 <= statesal  THEN DO;
18238 +        _NODE_  =                   23;
18239 +        _LEAF_  =                   53;
18240 +        P_totalsal  =     264361.269230769;
18241 +        V_totalsal  =     268468.275862069;
18242 +        END;
18243 +      ELSE DO;
18244 +        _NODE_  =                   22;
18245 +        _LEAF_  =                   52;
18246 +        P_totalsal  =     188379.583333333;
18247 +        V_totalsal  =     197484.576923076;
18248 +        END;
18249 +      END;
18250 +    ELSE DO;
18251 +      IF  NOT MISSING(nonstsal ) AND
18252 +                     23033.5 <= nonstsal  THEN DO;
18253 +        IF  NOT MISSING(statesal ) AND
18254 +          statesal  <               111605 THEN DO;
18255 +          _NODE_  =                   36;
18256 +          _LEAF_  =                   50;
18257 +          P_totalsal  =     145322.421052631;
18258 +          V_totalsal  =     141973.761904761;
18259 +          END;
18260 +        ELSE DO;
18261 +          _NODE_  =                   37;
18262 +          _LEAF_  =                   51;
18263 +          P_totalsal  =     175551.742424242;
18264 +          V_totalsal  =     183700.727272727;
18265 +          END;
18266 +        END;
18267 +      ELSE DO;
18268 +        IF  NOT MISSING(statesal ) AND
18269 +                      117576.5 <= statesal  THEN DO;
18270 +          IF  NOT MISSING(statesal ) AND
18271 +                          136441 <= statesal  THEN DO;
18272 +            _NODE_  =                   55;
18273 +            _LEAF_  =                   49;
18274 +            P_totalsal  =     149342.807017543;
18275 +            V_totalsal  =     150521.045454545;
18276 +            END;
18277 +          ELSE DO;
18278 +            _NODE_  =                   54;
18279 +            _LEAF_  =                   48;
18280 +            P_totalsal  =     131039.036144578;
18281 +            V_totalsal  =         128212.84375;
18282 +            END;
18283 +          END;
18284 +        ELSE DO;
18285 +          IF  NOT MISSING(statesal ) AND
18286 +                        101772.5 <= statesal  THEN DO;
18287 +            IF  NOT MISSING(statesal ) AND
18288 +                            110326 <= statesal  THEN DO;
18289 +              _NODE_  =                   81;
18290 +              _LEAF_  =                   47;
18291 +              P_totalsal  =        117554.203125;
18292 +              V_totalsal  =            116456.85;
18293 +              END;
18294 +            ELSE DO;
18295 +              _NODE_  =                   80;
18296 +              _LEAF_  =                   46;
18297 +              P_totalsal  =     109521.424657534;
18298 +              V_totalsal  =     109758.829268292;
18299 +              END;
18300 +            END;
18301 +          ELSE DO;
18302 +            IF  NOT MISSING(statesal ) AND
18303 +                           95789.5 <= statesal  THEN DO;
18304 +              _NODE_  =                   79;
18305 +              _LEAF_  =                   45;
18306 +              P_totalsal  =     101223.018518518;
18307 +              V_totalsal  =          99647.84375;
18308 +              END;
18309 +            ELSE DO;
18310 +              IF  NOT MISSING(statesal ) AND
18311 +                               91975 <= statesal  THEN DO;
18312 +                _NODE_  =                  105;
18313 +                _LEAF_  =                   44;
18314 +                P_totalsal  =     95334.1960784313;
18315 +                V_totalsal  =             95030.85;
18316 +                END;
18317 +              ELSE DO;
18318 +                _NODE_  =                  104;
18319 +                _LEAF_  =                   43;
18320 +                P_totalsal  =     90711.1296296296;
18321 +                V_totalsal  =              91231.4;
18322 +                END;
18323 +              END;
18324 +            END;
18325 +          END;
18326 +        END;
18327 +      END;
18328 +    END;
18329 +  ELSE DO;
18330 +    IF  NOT MISSING(nonstsal ) AND
18331 +                     68358 <= nonstsal  THEN DO;
18332 +      IF  NOT MISSING(statesal ) AND
18333 +                       27171 <= statesal  THEN DO;
18334 +        _NODE_  =                   19;
18335 +        _LEAF_  =                   42;
18336 +        P_totalsal  =     142233.363636363;
18337 +        V_totalsal  =     138015.111111111;
18338 +        END;
18339 +      ELSE DO;
18340 +        IF  NOT MISSING(nonstsal ) AND
18341 +                       89303.5 <= nonstsal  THEN DO;
18342 +          IF  NOT MISSING(nonstsal ) AND
18343 +                        102882.5 <= nonstsal  THEN DO;
18344 +            _NODE_  =                   51;
18345 +            _LEAF_  =                   41;
18346 +            P_totalsal  =          111508.4125;
18347 +            V_totalsal  =     113460.117647058;
18348 +            END;
18349 +          ELSE DO;
18350 +            IF  NOT MISSING(nonstsal ) AND
18351 +                             95966 <= nonstsal  THEN DO;
18352 +              _NODE_  =                   77;
18353 +              _LEAF_  =                   40;
18354 +              P_totalsal  =     100421.356164383;
18355 +              V_totalsal  =     100345.344827586;
18356 +              END;
18357 +            ELSE DO;
18358 +              IF  NOT MISSING(nonstsal ) AND
18359 +                             92349.5 <= nonstsal  THEN DO;
18360 +                _NODE_  =                  103;
18361 +                _LEAF_  =                   39;
18362 +                P_totalsal  =              95371.3;
18363 +                V_totalsal  =            96703.375;
18364 +                END;
18365 +              ELSE DO;
18366 +                _NODE_  =                  102;
18367 +                _LEAF_  =                   38;
18368 +                P_totalsal  =     91942.7910447761;
18369 +                V_totalsal  =              90884.6;
18370 +                END;
18371 +              END;
18372 +            END;
18373 +          END;
18374 +        ELSE DO;
18375 +          IF  NOT MISSING(nonstsal ) AND
18376 +                           79396 <= nonstsal  THEN DO;
18377 +            IF  NOT MISSING(nonstsal ) AND
18378 +                           84951.5 <= nonstsal  THEN DO;
18379 +              _NODE_  =                   75;
18380 +              _LEAF_  =                   37;
18381 +              P_totalsal  =     87713.6266666666;
18382 +              V_totalsal  =          86818.59375;
18383 +              END;
18384 +            ELSE DO;
18385 +              IF  NOT MISSING(nonstsal ) AND
18386 +                               82225 <= nonstsal  THEN DO;
18387 +                _NODE_  =                  101;
18388 +                _LEAF_  =                   36;
18389 +                P_totalsal  =              83984.8;
18390 +                V_totalsal  =     85157.4782608695;
18391 +                END;
18392 +              ELSE DO;
18393 +                _NODE_  =                  100;
18394 +                _LEAF_  =                   35;
18395 +                P_totalsal  =     81679.0512820512;
18396 +                V_totalsal  =     81507.3636363636;
18397 +                END;
18398 +              END;
18399 +            END;
18400 +          ELSE DO;
18401 +            IF  NOT MISSING(nonstsal ) AND
18402 +                             73932 <= nonstsal  THEN DO;
18403 +              _NODE_  =                   73;
18404 +              _LEAF_  =                   34;
18405 +              P_totalsal  =     77790.8088235294;
18406 +              V_totalsal  =     77070.1896551724;
18407 +              END;
18408 +            ELSE DO;
18409 +              IF  NOT MISSING(nonstsal ) AND
18410 +                nonstsal  <                70266 THEN DO;
18411 +                _NODE_  =                   98;
18412 +                _LEAF_  =                   32;
18413 +                P_totalsal  =         70739.328125;
18414 +                V_totalsal  =             69560.12;
18415 +                END;
18416 +              ELSE DO;
18417 +                _NODE_  =                   99;
18418 +                _LEAF_  =                   33;
18419 +                P_totalsal  =     73731.6288659793;
18420 +                V_totalsal  =                73035;
18421 +                END;
18422 +              END;
18423 +            END;
18424 +          END;
18425 +        END;
18426 +      END;
18427 +    ELSE DO;
18428 +      IF  NOT MISSING(statesal ) AND
18429 +                     51742.5 <= statesal  THEN DO;
18430 +        IF  NOT MISSING(nonstsal ) AND
18431 +                       18694.5 <= nonstsal  THEN DO;
18432 +          _NODE_  =                   31;
18433 +          _LEAF_  =                   31;
18434 +          P_totalsal  =     105386.494949494;
18435 +          V_totalsal  =     113819.975609756;
18436 +          END;
18437 +        ELSE DO;
18438 +          IF  NOT MISSING(statesal ) AND
18439 +            statesal  <              66247.5 THEN DO;
18440 +            IF  NOT MISSING(statesal ) AND
18441 +                             59398 <= statesal  THEN DO;
18442 +              IF  NOT MISSING(statesal ) AND
18443 +                             63139.5 <= statesal  THEN DO;
18444 +                _NODE_  =                   93;
18445 +                _LEAF_  =                   25;
18446 +                P_totalsal  =     65855.1803278688;
18447 +                V_totalsal  =     65535.5142857143;
18448 +                END;
18449 +              ELSE DO;
18450 +                _NODE_  =                   92;
18451 +                _LEAF_  =                   24;
18452 +                P_totalsal  =                62329;
18453 +                V_totalsal  =     62293.6363636363;
18454 +                END;
18455 +              END;
18456 +            ELSE DO;
18457 +              IF  NOT MISSING(statesal ) AND
18458 +                statesal  <                54315 THEN DO;
18459 +                _NODE_  =                   90;
18460 +                _LEAF_  =                   22;
18461 +                P_totalsal  =     54687.5932203389;
18462 +                V_totalsal  =     55166.5151515151;
18463 +                END;
18464 +              ELSE DO;
18465 +                _NODE_  =                   91;
18466 +                _LEAF_  =                   23;
18467 +                P_totalsal  =     58492.0076335878;
18468 +                V_totalsal  =     58224.2903225806;
18469 +                END;
18470 +              END;
18471 +            END;
18472 +          ELSE DO;
18473 +            IF  NOT MISSING(statesal ) AND
18474 +                             77561 <= statesal  THEN DO;
18475 +              IF  NOT MISSING(statesal ) AND
18476 +                             82821.5 <= statesal  THEN DO;
18477 +                _NODE_  =                   97;
18478 +                _LEAF_  =                   30;
18479 +                P_totalsal  =              86975.4;
18480 +                V_totalsal  =     86406.1428571428;
18481 +                END;
18482 +              ELSE DO;
18483 +                _NODE_  =                   96;
18484 +                _LEAF_  =                   29;
18485 +                P_totalsal  =     81559.6236559139;
18486 +                V_totalsal  =     80036.2647058823;
18487 +                END;
18488 +              END;
18489 +            ELSE DO;
18490 +              IF  NOT MISSING(statesal ) AND
18491 +                statesal  <              71563.5 THEN DO;
18492 +                _NODE_  =                   94;
18493 +                _LEAF_  =                   26;
18494 +                P_totalsal  =     70544.2612612612;
18495 +                V_totalsal  =     71108.8409090909;
18496 +                END;
18497 +              ELSE DO;
18498 +                IF  NOT MISSING(statesal ) AND
18499 +                  statesal  <                74875 THEN DO;
18500 +                  _NODE_  =                  120;
18501 +                  _LEAF_  =                   27;
18502 +                  P_totalsal  =     73895.7868852459;
18503 +                  V_totalsal  =     75461.8484848484;
18504 +                  END;
18505 +                ELSE DO;
18506 +                  _NODE_  =                  121;
18507 +                  _LEAF_  =                   28;
18508 +                  P_totalsal  =     76233.8923076923;
18509 +                  V_totalsal  =     77924.7037037037;
18510 +                  END;
18511 +                END;
18512 +              END;
18513 +            END;
18514 +          END;
18515 +        END;
18516 +      ELSE DO;
18517 +        IF  NOT MISSING(nonstsal ) AND
18518 +                       47236.5 <= nonstsal  THEN DO;
18519 +          IF  NOT MISSING(nonstsal ) AND
18520 +                         57561.5 <= nonstsal  THEN DO;
18521 +            IF  NOT MISSING(nonstsal ) AND
18522 +                             64045 <= nonstsal  THEN DO;
18523 +              _NODE_  =                   67;
18524 +              _LEAF_  =                   21;
18525 +              P_totalsal  =     67651.3558282208;
18526 +              V_totalsal  =             67018.65;
18527 +              END;
18528 +            ELSE DO;
18529 +              _NODE_  =                   66;
18530 +              _LEAF_  =                   20;
18531 +              P_totalsal  =     62452.1654411764;
18532 +              V_totalsal  =     62460.6293103448;
18533 +              END;
18534 +            END;
18535 +          ELSE DO;
18536 +            _ARBFMT_28 = PUT( position , $28.);
18537 +             %DMNORMIP( _ARBFMT_28);
18538 +            IF _ARBFMT_28 IN ('OTHER' ,'ADMIN' ,'ASSISTANT OTHER' ,
18539 +            'BUILDING' ,'CLINICAL OTHER' ,'CLINICAL RESEARCH' ,'DATA' ,
18540 +            'EXECUTIVE' ,'RESEARCH OTHER' ,'OTHER PROGRAM' ,
18541 +            'PROJECT MANAGER' ,'RESEARCH ASSISTANT' ,'RESEARCH ASSOCIATE' ,
18542 +              'RESEARCH SPECIALIST' ,'RESEARCH TECHNICIAN' ) THEN DO;
18543 +              IF  NOT MISSING(nonstsal ) AND
18544 +                             52314.5 <= nonstsal  THEN DO;
18545 +                IF  NOT MISSING(nonstsal ) AND
18546 +                  nonstsal  <                54069 THEN DO;
18547 +                  _NODE_  =                  118;
18548 +                  _LEAF_  =                   17;
18549 +                  P_totalsal  =     53463.0326086956;
18550 +                  V_totalsal  =     53454.8205128205;
18551 +                  END;
18552 +                ELSE DO;
18553 +                  _NODE_  =                  119;
18554 +                  _LEAF_  =                   18;
18555 +                  P_totalsal  =     56112.2881355932;
18556 +                  V_totalsal  =     56244.7291666666;
18557 +                  END;
18558 +                END;
18559 +              ELSE DO;
18560 +                IF  NOT MISSING(nonstsal ) AND
18561 +                               50208.5 <= nonstsal  THEN DO;
18562 +                  _NODE_  =                  117;
18563 +                  _LEAF_  =                   16;
18564 +                  P_totalsal  =     51353.1333333333;
18565 +                  V_totalsal  =     51452.6818181818;
18566 +                  END;
18567 +                ELSE DO;
18568 +                  IF  NOT MISSING(nonstsal ) AND
18569 +                    nonstsal  <              48572.5 THEN DO;
18570 +                    _NODE_  =                  128;
18571 +                    _LEAF_  =                   14;
18572 +                    P_totalsal  =     48331.1384615384;
18573 +                    V_totalsal  =     48000.1891891891;
18574 +                    END;
18575 +                  ELSE DO;
18576 +                    _NODE_  =                  129;
18577 +                    _LEAF_  =                   15;
18578 +                    P_totalsal  =     49615.2093023255;
18579 +                    V_totalsal  =     49436.8378378378;
18580 +                    END;
18581 +                  END;
18582 +                END;
18583 +              END;
18584 +            ELSE DO;
18585 +              _NODE_  =                   65;
18586 +              _LEAF_  =                   19;
18587 +              P_totalsal  =             59423.75;
18588 +              V_totalsal  =     58581.1666666666;
18589 +              END;
18590 +            END;
18591 +          END;
18592 +        ELSE DO;
18593 +          IF  NOT MISSING(statesal ) AND
18594 +                         39899.5 <= statesal  THEN DO;
18595 +            IF  NOT MISSING(nonstsal ) AND
18596 +                           11020.5 <= nonstsal  THEN DO;
18597 +              _NODE_  =                   63;
18598 +              _LEAF_  =                   13;
18599 +              P_totalsal  =     70818.3703703703;
18600 +              V_totalsal  =            76347.125;
18601 +              END;
18602 +            ELSE DO;
18603 +              IF  NOT MISSING(statesal ) AND
18604 +                             46728.5 <= statesal  THEN DO;
18605 +                IF  NOT MISSING(statesal ) AND
18606 +                                 49470 <= statesal  THEN DO;
18607 +                  _NODE_  =                  115;
18608 +                  _LEAF_  =                   12;
18609 +                  P_totalsal  =     51269.5405405405;
18610 +                  V_totalsal  =     50776.3703703703;
18611 +                  END;
18612 +                ELSE DO;
18613 +                  _NODE_  =                  114;
18614 +                  _LEAF_  =                   11;
18615 +                  P_totalsal  =     48737.9183673469;
18616 +                  V_totalsal  =     48443.6041666666;
18617 +                  END;
18618 +                END;
18619 +              ELSE DO;
18620 +                IF  NOT MISSING(statesal ) AND
18621 +                                 43211 <= statesal  THEN DO;
18622 +                  IF  NOT MISSING(statesal ) AND
18623 +                                 44928.5 <= statesal  THEN DO;
18624 +                    _NODE_  =                  127;
18625 +                    _LEAF_  =                   10;
18626 +                    P_totalsal  =              45916.1;
18627 +                    V_totalsal  =     46094.6470588235;
18628 +                    END;
18629 +                  ELSE DO;
18630 +                    _NODE_  =                  126;
18631 +                    _LEAF_  =                    9;
18632 +                    P_totalsal  =     44672.6947368421;
18633 +                    V_totalsal  =     44674.4871794871;
18634 +                    END;
18635 +                  END;
18636 +                ELSE DO;
18637 +                  _NODE_  =                  112;
18638 +                  _LEAF_  =                    8;
18639 +                  P_totalsal  =     42302.3103448275;
18640 +                  V_totalsal  =      41848.527027027;
18641 +                  END;
18642 +                END;
18643 +              END;
18644 +            END;
18645 +          ELSE DO;
18646 +            IF  NOT MISSING(nonstsal ) AND
18647 +                             36731 <= nonstsal  THEN DO;
18648 +              IF  NOT MISSING(nonstsal ) AND
18649 +                nonstsal  <                41994 THEN DO;
18650 +                IF  NOT MISSING(nonstsal ) AND
18651 +                  nonstsal  <              39506.5 THEN DO;
18652 +                  _NODE_  =                  108;
18653 +                  _LEAF_  =                    5;
18654 +                  P_totalsal  =     39119.9294117647;
18655 +                  V_totalsal  =     38680.7432432432;
18656 +                  END;
18657 +                ELSE DO;
18658 +                  _NODE_  =                  109;
18659 +                  _LEAF_  =                    6;
18660 +                  P_totalsal  =      41742.612745098;
18661 +                  V_totalsal  =     42987.9304347826;
18662 +                  END;
18663 +                END;
18664 +              ELSE DO;
18665 +                _NODE_  =                   85;
18666 +                _LEAF_  =                    7;
18667 +                P_totalsal  =     45920.9526315789;
18668 +                V_totalsal  =      45435.050955414;
18669 +                END;
18670 +              END;
18671 +            ELSE DO;
18672 +              _ARBFMT_30 = PUT( exempt2 , $30.);
18673 +               %DMNORMIP( _ARBFMT_30);
18674 +              IF _ARBFMT_30 IN ('NON-PERMANENT' ) THEN DO;
18675 +                _NODE_  =                   83;
18676 +                _LEAF_  =                    4;
18677 +                P_totalsal  =     18065.0520833333;
18678 +                V_totalsal  =                16201;
18679 +                END;
18680 +              ELSE DO;
18681 +                IF  NOT MISSING(statesal ) AND
18682 +                               30203.5 <= statesal  THEN DO;
18683 +                  _NODE_  =                  107;
18684 +                  _LEAF_  =                    3;
18685 +                  P_totalsal  =     38949.9046153846;
18686 +                  V_totalsal  =     38674.6518518518;
18687 +                  END;
18688 +                ELSE DO;
18689 +                  IF  NOT MISSING(nonstsal ) AND
18690 +                    nonstsal  <                13312 THEN DO;
18691 +                    _NODE_  =                  122;
18692 +                    _LEAF_  =                    1;
18693 +                    P_totalsal  =      26887.873076923;
18694 +                    V_totalsal  =              27700.2;
18695 +                    END;
18696 +                  ELSE DO;
18697 +                    _NODE_  =                  123;
18698 +                    _LEAF_  =                    2;
18699 +                    P_totalsal  =     33620.4532258064;
18700 +                    V_totalsal  =     33052.4937238493;
18701 +                    END;
18702 +                  END;
18703 +                END;
18704 +              END;
18705 +            END;
18706 +          END;
18707 +        END;
18708 +      END;
18709 +    END;
18710 +  END;
18711 +
18712 +*****  RESIDUALS R_ *************;
18713 +IF MISSING( totalsal ) THEN R_totalsal  = .;
18714 +ELSE R_totalsal  = totalsal  - P_totalsal ;
18715 +
18716 +****************************************************************;
18717 +******          END OF DECISION TREE SCORING CODE         ******;
18718 +****************************************************************;
18719 +
18720 +drop _LEAF_;
NOTE: %INCLUDE (level 1) ending.
18721  run;

NOTE: DATA STEP view saved on file EMWS1.TREE5_TEST.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      

18722  quit;
18723  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

NOTE: View EMWS1.TREE5_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      
18725  proc sort data=WORK.EM_USER_REPORT;
18726  by ID VIEW;
18727  run;

NOTE: There were 132 observations read from the data set WORK.EM_USER_REPORT.
NOTE: The data set WORK.EM_USER_REPORT has 132 observations and 4 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

18728  *------------------------------------------------------------*;
18729  * Tree5: Computing metadata for TRAIN data;
18730  *------------------------------------------------------------*;

NOTE: View EMWS1.TREE5_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
      
19125  data WORK.MODELTEMP_INFO;
19126  set EMWS1.Tree5_EMINFO;
19127  where DATA='Tree5' and KEY ^in('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
19128  run;

NOTE: There were 0 observations read from the data set EMWS1.TREE5_EMINFO.
      WHERE (DATA='Tree5') and KEY not in ('DECDATA', 'DECMETA', 'IMPORTANCE', 'MODEL');
NOTE: The data set WORK.MODELTEMP_INFO has 0 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

19129  data EMWS1.Tree5_EMINFO;
19130  length TARGET KEY $32 DATA $43;
19131  input TARGET KEY DATA $;
19132  cards;

NOTE: The data set EMWS1.TREE5_EMINFO has 3 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      

19136  run;
19137  data EMWS1.Tree5_EMINFO;
19138  set EMWS1.Tree5_EMINFO WORK.MODELTEMP_INFO;
19139  run;

NOTE: There were 3 observations read from the data set EMWS1.TREE5_EMINFO.
NOTE: There were 0 observations read from the data set WORK.MODELTEMP_INFO.
NOTE: The data set EMWS1.TREE5_EMINFO has 3 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

19140  proc sort data = EMWS1.Tree5_EMINFO NOTHREADS;
19141  by TARGET KEY;
19142  run;

NOTE: There were 3 observations read from the data set EMWS1.TREE5_EMINFO.
NOTE: The data set EMWS1.TREE5_EMINFO has 3 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

19143  proc sort data = EMWS1.Ids_EMINFO OUT=WORK.SORTEDEMINFO NOTHREADS;
19144  by TARGET KEY;
19145  run;

NOTE: There were 3 observations read from the data set EMWS1.IDS_EMINFO.
NOTE: The data set WORK.SORTEDEMINFO has 3 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

19146  proc sort data = EMWS1.Tree5_EMINFO OUT=WORK.TEMP_INFO NOTHREADS;
19147  by TARGET KEY;
19148  run;

NOTE: Input data set is already sorted; it has been copied to the output data set.
NOTE: There were 3 observations read from the data set EMWS1.TREE5_EMINFO.
NOTE: The data set WORK.TEMP_INFO has 3 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

19149  data EMWS1.Tree5_EMINFO;
19150  merge WORK.SORTEDEMINFO WORK.TEMP_INFO;
19151  by TARGET KEY;
19152  run;

NOTE: There were 3 observations read from the data set WORK.SORTEDEMINFO.
NOTE: There were 3 observations read from the data set WORK.TEMP_INFO.
NOTE: The data set EMWS1.TREE5_EMINFO has 4 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

19153  proc datasets lib=work nolist;
19154  delete TEMP_INFO SORTEDEMINFO;
19155  run;

NOTE: Deleting WORK.TEMP_INFO (memtype=DATA).
NOTE: Deleting WORK.SORTEDEMINFO (memtype=DATA).
19156  quit;

NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

NOTE: View EMWS1.TREE5_TRAIN.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      
NOTE: View EMWS1.TREE5_VALIDATE.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
      
NOTE: View EMWS1.TREE5_TEST.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
      
