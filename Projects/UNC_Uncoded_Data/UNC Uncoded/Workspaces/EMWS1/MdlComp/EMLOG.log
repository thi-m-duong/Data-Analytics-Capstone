*------------------------------------------------------------*
User:                Intern Three
Date:                April 21, 2016
Time:                06:14:36
Site:                70085778
Platform:            X64_7HOME
Maintenance Release: 9.04.01M3P062415
EM Version:          14.1
* 
*------------------------------------------------------------*
* Training Log
Date:                April 21, 2016
Time:                06:14:31
*------------------------------------------------------------*
10867  proc freq data=EMWS1.MdlComp_VariableSet noprint;
10868  table ROLE*LEVEL/out=WORK.MdlCompMETA;
10869  run;
 
NOTE: There were 1 observations read from the data set EMWS1.MDLCOMP_VARIABLESET.
NOTE: The data set WORK.MDLCOMPMETA has 1 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10870  proc print data=WORK.MdlCompMETA label noobs;
10871  var ROLE LEVEL COUNT;
10872  label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
10873  title9 ' ';
10874  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
10875  run;
 
NOTE: There were 1 observations read from the data set WORK.MDLCOMPMETA.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10876  title10;
 
10877  %let _hpflow = 0;
10878  data _null_;
10879  set EMWS1.Tree_EMINFO;
10880  where key="HPDMSAMPLE";
10881  call symput('_hpflow', '1');
10882  run;
 
NOTE: There were 0 observations read from the data set EMWS1.TREE_EMINFO.
      WHERE key='HPDMSAMPLE';
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10883  data _null_;
10884  set EMWS1.em_nodeid;
10885  where upcase(NODEID) = upcase("Tree");
10886  call symput('_MODELDESC', strip(tranwrd(LABEL, '"', '""')));
10887  run;
 
NOTE: There were 1 observations read from the data set EMWS1.EM_NODEID.
      WHERE UPCASE(NODEID)='TREE';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10888  data EMWS1.MdlComp_EMRANK;
10889  length PARENT $16 MODEL $16 MODELDESCRIPTION $81 DATAROLE $20 TARGET $32 TARGETLABEL $200;
10890  label PARENT = "%sysfunc(sasmsg(sashelp.dmine, rpt_parent_vlabel  ,  NOQUOTE))" MODEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_modelnode_vlabel, NOQUOTE))" MODELDESCRIPTION = "%sysfunc(sasmsg(sashelp.dmine, rpt_modeldesc_vlabel, NOQUOTE))" TARGETLABEL
10890! =
10891     "%sysfunc(sasmsg(sashelp.dmine, meta_targetlabel_vlabel, NOQUOTE))";
10892  retain parent "Tree" MODEL "Tree" MODELDESCRIPTION "Decision Tree (default)" TARGETLABEL "";
10893  set EMWS1.Tree_EMRANK;
10894  where upcase(TARGET) = upcase("totalsal");
10895  run;
 
NOTE: There were 22 observations read from the data set EMWS1.TREE_EMRANK.
      WHERE UPCASE(TARGET)='TOTALSAL';
NOTE: The data set EMWS1.MDLCOMP_EMRANK has 22 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
10896  data _null_;
10897  set EMWS1.em_nodeid;
10898  where upcase(NODEID) = upcase("Tree");
10899  call symput('_MODELDESC', strip(tranwrd(LABEL, '"', '""')));
10900  run;
 
NOTE: There were 1 observations read from the data set EMWS1.EM_NODEID.
      WHERE UPCASE(NODEID)='TREE';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10901  data EMWS1.MdlComp_EMSCOREDIST;
10902  length PARENT $16 MODEL $16 MODELDESCRIPTION $81 DATAROLE $20 TARGET $32 TARGETLABEL $200;
10903  label PARENT = "%sysfunc(sasmsg(sashelp.dmine, rpt_parent_vlabel  ,  NOQUOTE))" MODEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_modelnode_vlabel, NOQUOTE))" MODELDESCRIPTION = "%sysfunc(sasmsg(sashelp.dmine, rpt_modeldesc_vlabel, NOQUOTE))" TARGETLABEL
10903! =
10904     "%sysfunc(sasmsg(sashelp.dmine, meta_targetlabel_vlabel, NOQUOTE))";
10905  retain parent "Tree" MODEL "Tree" MODELDESCRIPTION "Decision Tree (default)" TARGETLABEL "";
10906  set EMWS1.Tree_EMSCOREDIST;
10907  where upcase(TARGET) = upcase("totalsal");
10908  run;
 
NOTE: There were 30 observations read from the data set EMWS1.TREE_EMSCOREDIST.
      WHERE UPCASE(TARGET)='TOTALSAL';
NOTE: The data set EMWS1.MDLCOMP_EMSCOREDIST has 30 observations and 18 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10909  data WORK.Tree_OUTFIT;
10910  set EMWS1.Tree_EMOUTFIT;
10911  where TARGET = "totalsal";
10912  run;
 
NOTE: There were 1 observations read from the data set EMWS1.TREE_EMOUTFIT.
      WHERE TARGET='totalsal';
NOTE: The data set WORK.TREE_OUTFIT has 1 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _INIT >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL SETMETADATA >>
NOTE: There were 1 observations read from the data set EMWS1.TREE_EMINFO.
      WHERE (TARGET='totalsal') and (KEY='DECMETA');
NOTE: The data set WORK.EMINFO425M69DZ has 1 observations and 3 variables.
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL SETMETADATA >>
NOTE: There were 1 observations read from the data set EMWS1.TREE_EMINFO.
      WHERE (TARGET='totalsal') and (KEY='DECDATA');
NOTE: The data set WORK.EMINFO425M69DZ has 1 observations and 3 variables.
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _term >>
10913  data WORK.Tree_OUTFIT;
10914  set WORK.Tree_OUTFIT;
10915  run;
 
NOTE: There were 1 observations read from the data set WORK.TREE_OUTFIT.
NOTE: The data set WORK.TREE_OUTFIT has 1 observations and 22 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10916  data _null_;
10917  set EMWS1.em_nodeid;
10918  where upcase(NODEID) = upcase("Tree");
10919  call symput('_MODELDESC', strip(tranwrd(LABEL, '"', '""')));
10920  run;
 
NOTE: There were 1 observations read from the data set EMWS1.EM_NODEID.
      WHERE UPCASE(NODEID)='TREE';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10921  data EMWS1.MdlComp_EMOUTFIT;
10922  length PARENT $16 MODEL $16 MODELDESCRIPTION $81 TARGET $32 TARGETLABEL $200;
10923  label PARENT = "%sysfunc(sasmsg(sashelp.dmine, rpt_parent_vlabel  ,  NOQUOTE))" MODEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_modelnode_vlabel, NOQUOTE))" MODELDESCRIPTION = "%sysfunc(sasmsg(sashelp.dmine, rpt_modeldesc_vlabel, NOQUOTE))" TARGETLABEL
10923! =
10924     "%sysfunc(sasmsg(sashelp.dmine, meta_targetlabel_vlabel, NOQUOTE))";
10925  retain parent "Tree" MODEL "Tree" MODELDESCRIPTION "Decision Tree (default)" TARGETLABEL "";
10926  set WORK.Tree_OUTFIT;
10927  where upcase(TARGET) = upcase("totalsal");
10928  run;
 
NOTE: There were 1 observations read from the data set WORK.TREE_OUTFIT.
      WHERE UPCASE(TARGET)='TOTALSAL';
NOTE: The data set EMWS1.MDLCOMP_EMOUTFIT has 1 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10929  data _null_;
10930  set EMWS1.em_nodeid;
10931  where upcase(NODEID) = upcase("Tree");
10932  call symput('_MODELDESC', strip(tranwrd(LABEL, '"', '""')));
10933  run;
 
NOTE: There were 1 observations read from the data set EMWS1.EM_NODEID.
      WHERE UPCASE(NODEID)='TREE';
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10934  data EMWS1.MdlComp_EMRESIDUAL;
10935  length PARENT $16 MODEL $16 MODELDESCRIPTION $81 DATAROLE $20 TARGET $32 TARGETLABEL $200;
10936  label PARENT = "%sysfunc(sasmsg(sashelp.dmine, rpt_parent_vlabel  ,  NOQUOTE))" MODEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_modelnode_vlabel, NOQUOTE))" MODELDESCRIPTION = "%sysfunc(sasmsg(sashelp.dmine, rpt_modeldesc_vlabel, NOQUOTE))" TARGETLABEL
10936! =
10937     "%sysfunc(sasmsg(sashelp.dmine, meta_targetlabel_vlabel, NOQUOTE))";
10938  retain parent "Tree" MODEL "Tree" MODELDESCRIPTION "Decision Tree (default)" TARGETLABEL "";
10939  set EMWS1.Tree_EMRESIDUAL;
10940  where upcase(TARGET) = upcase("totalsal");
10941  run;
 
NOTE: There were 18 observations read from the data set EMWS1.TREE_EMRESIDUAL.
      WHERE UPCASE(TARGET)='TOTALSAL';
NOTE: The data set EMWS1.MDLCOMP_EMRESIDUAL has 18 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
*------------------------------------------------------------*
* "Compute assessment statistics"
*------------------------------------------------------------*
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _INIT >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL SETMETADATA >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL SETMETADATA >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL next >>
Executing  SASHELP.EMCORE.EMINFOITERATOR.SCL _term >>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
11038  proc sort data=EMWS1.MdlComp_EMOUTFIT NOTHREADS;
11039  by model target;
11040  run;
 
NOTE: There were 1 observations read from the data set EMWS1.MDLCOMP_EMOUTFIT.
NOTE: The data set EMWS1.MDLCOMP_EMOUTFIT has 1 observations and 25 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11041  data EMWS1.MdlComp_EMOUTFIT;
11042  length PARENT $16 MODEL $16 MODELDESCRIPTION $81 TARGET $32 TARGETLABEL $200 _CRITERION_ 8;
11043  set EMWS1.MdlComp_EMOUTFIT;
11044  label _CRITERION_ = "%sysfunc(sasmsg(sashelp.dmine, rpt_selectioncriterion_vlabel ,  NOQUOTE, %nrbquote(Valid: Average Squared Error)))";
11045  _CRITERION_ = _VASE_;
11046  run;
 
NOTE: There were 1 observations read from the data set EMWS1.MDLCOMP_EMOUTFIT.
NOTE: The data set EMWS1.MDLCOMP_EMOUTFIT has 1 observations and 26 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
11047  data EMWS1.MdlComp_EMOUTFIT;
11048  length USE $1;
11049  label USE= "%sysfunc(sasmsg(sashelp.dmine, rpt_selmodel_vlabel,  NOQUOTE))";
11050  set EMWS1.MdlComp_EMOUTFIT;
11051  run;
 
NOTE: Variable USE is uninitialized.
NOTE: There were 1 observations read from the data set EMWS1.MDLCOMP_EMOUTFIT.
NOTE: The data set EMWS1.MDLCOMP_EMOUTFIT has 1 observations and 27 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
11052  proc sort data = EMWS1.MdlComp_EMOUTFIT NOTHREADS;
11053  by
11054  _VASE_
11055  _ASE_;
11056  run;
 
NOTE: There were 1 observations read from the data set EMWS1.MDLCOMP_EMOUTFIT.
NOTE: The data set EMWS1.MDLCOMP_EMOUTFIT has 1 observations and 27 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11057  %let EM_AUTOMODEL = %str();
11058  data EMWS1.MdlComp_EMOUTFIT;
11059  set EMWS1.MdlComp_EMOUTFIT;
11060  drop found;
11061  retain found 0;
11062  if found = 0 and _VASE_ ne . then do;
11063  use = 'Y';
11064  found = 1;
11065  call symput('EM_AUTOMODEL', model);
11066  end;
11067  run;
 
NOTE: There were 1 observations read from the data set EMWS1.MDLCOMP_EMOUTFIT.
NOTE: The data set EMWS1.MDLCOMP_EMOUTFIT has 1 observations and 27 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11068  title ' ';
11069  proc print data=EMWS1.MdlComp_EMOUTFIT noobs label;
11070  var
11071  USE
11072  MODEL
11073  MODELDESCRIPTION
11074  _VASE_
11075  _ASE_
11076  ;
11077  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_fitstat_title,        NOQUOTE))";
11078  title10 "Model Selection based on Valid: Average Squared Error (_VASE_)";
11079  run;
 
NOTE: There were 1 observations read from the data set EMWS1.MDLCOMP_EMOUTFIT.
NOTE: The PROCEDURE PRINT printed page 2.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11080  title9;
11081  title10;
11082  proc transpose data=EMWS1.MdlComp_EMOUTFIT out= work.modelstats(rename=(_LABEL_=Label _NAME_=STAT));
11083  ID model;
11084  by target targetLabel;
11085  run;
 
NOTE: There were 1 observations read from the data set EMWS1.MDLCOMP_EMOUTFIT.
NOTE: The data set WORK.MODELSTATS has 21 observations and 5 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11086  data work.modelstats;
11087  set work.modelstats;
11088  if substr(STAT, 1, 2) = '_V' or STAT='VKS' then do;
11089  NumRole=2;
11090  end;
11091  else if substr(STAT, 1, 2) = '_T' or STAT='TKS' then do;
11092  NumRole=3;
11093  end;
11094  else if substr(STAT, 1, 1) = '_' or STAT in('KS', 'BINNED_KS_PROB_CUTOFF') then do;
11095  NumRole=1;
11096  end;
11097  run;
 
NOTE: There were 21 observations read from the data set WORK.MODELSTATS.
NOTE: The data set WORK.MODELSTATS has 21 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
11098  proc sort data=work.modelstats out=work.modelstats;
11099  by NumRole STAT;
11100  run;
 
NOTE: There were 21 observations read from the data set WORK.MODELSTATS.
NOTE: The data set WORK.MODELSTATS has 21 observations and 6 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11101  proc format;
11102  value RoleFmt 1='Train' 2='Valid' 3='Test';
NOTE: Format ROLEFMT has been output.
11103  run;
 
NOTE: PROCEDURE FORMAT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11104  proc print data= work.modelstats(drop=STAT target targetLabel) noobs label;
11105  label Label = "%sysfunc(sasmsg(sashelp.dmine, rpt_statistics_vlabel, NOQUOTE))" NumRole= "%sysfunc(sasmsg(sashelp.dmine, rpt_datarole_vlabel,   NOQUOTE))";
11106  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_fittable_title, NOQUOTE))";
11107  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_target_title,   NOQUOTE, totalsal))";
11108  by NumRole;
11109  format NumRole RoleFmt.;
11110  run;
 
NOTE: There were 21 observations read from the data set WORK.MODELSTATS.
NOTE: The PROCEDURE PRINT printed page 3.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
11111  title9;
11112  title10;
11113  data EMWS1.MdlComp_COMPAREFIT;
11114  length DataRole Target $32 targetlabel $200;
11115  label DataRole = "%sysfunc(sasmsg(sashelp.dmine, rpt_datarole_vlabel,  NOQUOTE))" STAT = "%sysfunc(sasmsg(sashelp.dmine, rpt_fitstat_vlabel,   NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_statlabel_vlabel, NOQUOTE))";
11116  set work.modelstats;
11117  DataRole = strip(put(NumRole, Rolefmt.));
11118  drop NumRole;
11119  run;
 
NOTE: There were 21 observations read from the data set WORK.MODELSTATS.
NOTE: The data set EMWS1.MDLCOMP_COMPAREFIT has 21 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
11120  %macro ReportFit;
11121  proc transpose data= EMWS1.MdlComp_EMOUTFIT(obs=1) out=tempFit;
11122  run;
11123  data _null_;
11124  set tempfit end=eof;
11125  retain statCount 0;
11126  if substr(_NAME_,1,2) ^in('_V', '_T', 'TK', 'VK') then do;
11127  statCount + 1;
11128  call symput('statName'!!strip(put(statCount,best.)), _NAME_);
11129  call symput('statLabel'!!strip(put(statCount,best.)), scan(_LABEL_,2, ':'));
11130  end;
11131  if eof then do;
11132  call symput('statCount', strip(put(statCount,best.)));
11133  end;
11134  run;
11135  data EMWS1.MdlComp_EMREPORTFIT;
11136  set EMWS1.MdlComp_EMOUTFIT;
11137  length FitStat $41 Label $40;
11138  label FitStat = "%sysfunc(sasmsg(sashelp.dmine, rpt_fitstat_vlabel,   NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_statlabel_vlabel, NOQUOTE))";
11139  %do i=1 %to &statCount;
11140  FitStat="&&StatName&i";
11141  Label="&&StatLabel&i";
11142  Train =&&StatName&i;
11143  %if &&StatName&i= KS %then %do;
11144  Validate = VKS;
11145  Test = TKS;
11146  %end;
11147  %else %if &&StatName&i= BINNED_KS_PROB_CUTOFF %then %do;
11148  Validate = _VBINNED_KS_PROB_CUTOFF_;
11149  Test = _TBINNED_KS_PROB_CUTOFF_;
11150  %end;
11151  %else %do;
11152  %let VstatName= _V%substr(&&StatName&i,2);
11153  %let TstatName= _T%substr(&&StatName&i,2);
11154  Validate=&VStatName;
11155  Test=&TStatName;
11156  %end;
11157  output;
11158  %end;
11159  keep Parent Model Target TargetLabel FitStat Label Train Validate Test;
11160  run;
11161  %mend;
11162  %reportFit;
 
NOTE: There were 1 observations read from the data set EMWS1.MDLCOMP_EMOUTFIT.
NOTE: The data set WORK.TEMPFIT has 21 observations and 3 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
 
NOTE: There were 21 observations read from the data set WORK.TEMPFIT.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
 
NOTE: Variable _VCRITERION_ is uninitialized.
NOTE: Variable _TCRITERION_ is uninitialized.
NOTE: Variable _VDFT_ is uninitialized.
NOTE: Variable _TDFT_ is uninitialized.
NOTE: There were 1 observations read from the data set EMWS1.MDLCOMP_EMOUTFIT.
NOTE: The data set EMWS1.MDLCOMP_EMREPORTFIT has 8 observations and 9 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
 
11163  proc datasets library=EMWS1 nolist;
11164  modify MdlComp_EMRANK;
11165  label PARENT = "%sysfunc(sasmsg(sashelp.dmine, rpt_parent_vlabel  ,  NOQUOTE))" MODEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_modelnode_vlabel, NOQUOTE))" DATAROLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_datarole_vlabel,  NOQUOTE))" TARGET =
11166     "%sysfunc(sasmsg(sashelp.dmine, rpt_targetvar_vlabel, NOQUOTE))" TARGETLABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_targetlabel_vlabel, NOQUOTE))";
11167  run;
 
NOTE: MODIFY was successful for EMWS1.MDLCOMP_EMRANK.DATA.
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11168  proc sort data=EMWS1.MdlComp_EMRANK NOTHREADS;
11169  by descending model target;
11170  run;
 
NOTE: There were 33 observations read from the data set EMWS1.MDLCOMP_EMRANK.
NOTE: The data set EMWS1.MDLCOMP_EMRANK has 33 observations and 15 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11171  proc datasets library=EMWS1 nolist;
11172  modify MdlComp_EMSCOREDIST;
11173  label PARENT = "%sysfunc(sasmsg(sashelp.dmine, rpt_parent_vlabel  ,  NOQUOTE))" MODEL = "%sysfunc(sasmsg(sashelp.dmine, rpt_modelnode_vlabel, NOQUOTE))" DATAROLE = "%sysfunc(sasmsg(sashelp.dmine, rpt_datarole_vlabel,  NOQUOTE))" TARGET =
11174     "%sysfunc(sasmsg(sashelp.dmine, rpt_targetvar_vlabel, NOQUOTE))" TARGETLABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_targetlabel_vlabel, NOQUOTE))";
11175  run;
 
NOTE: MODIFY was successful for EMWS1.MDLCOMP_EMSCOREDIST.DATA.
 
NOTE: PROCEDURE DATASETS used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
11176  proc sort data=EMWS1.MdlComp_EMSCOREDIST NOTHREADS;
11177  by descending model target;
11178  run;
 
NOTE: There were 45 observations read from the data set EMWS1.MDLCOMP_EMSCOREDIST.
NOTE: The data set EMWS1.MDLCOMP_EMSCOREDIST has 45 observations and 18 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
*------------------------------------------------------------*
* Score Log
Date:                April 21, 2016
Time:                06:14:34
*------------------------------------------------------------*
NOTE: View EMWS1.TREE_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
NOTE: View EMWS1.TREE_TRAIN.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
11280  /* Generate assessment metadata, which will be used to generate assessment data step */
11281  /* code, such as retrieving names of temporary variables and summary variables,      */
11282  /* labels, etc.  It is used in almost all the assessment computations such as lift,  */
11283  /* roc, index, scoreDist and could be thought as a global variable in assessment     */
11284  /* computation.                                                                      */
11285  data work.ASSESS_3E9DH5R_assessMeta_7LzKV3;
11286  length VARIABLE $32 FORMAT $44 TYPE $32 PARENT $32 LEVEL $32 PROPERTY $32 MEASUREMENT $10 LAST_LEVEL $32 GEN_VAR_IN_TEMP_DATA $32 RESULT_MEAN $32 RESULT_MEAN_LABEL $100 RESULT_MIN $32 RESULT_MIN_LABEL $100 MIN_ADJUSTED $32 RESULT_MAX $32
11286! RESULT_MAX_LABEL
11287     $100 MAX_ADJUSTED $32 RESULT_COUNT $32 RESULT_COUNT_LABEL $100 TEMPORARY_VARIABLE $32;
11288  VARIABLE = "totalsal";
11289  PARENT = "";
11290  FORMAT = "";
11291  TYPE = "";
11292  LEVEL = '';
11293  PROPERTY = "TARGET";
11294  MEASUREMENT = "INTERVAL";
11295  LAST_LEVEL = '';
11296  GEN_VAR_IN_TEMP_DATA = "totalsal";
11297  RESULT_MEAN = "_targetMean_";
11298  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_trgtMean_vlabel, NOQUOTE))";
11299  RESULT_MIN = "_targetMin_";
11300  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_trgtMin_vlabel, NOQUOTE))";
11301  MIN_ADJUSTED = "totalsal_minAdjusted_xB_ahMyxF";
11302  RESULT_MAX = "_targetMax_";
11303  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_trgtMax_vlabel, NOQUOTE))";
11304  MAX_ADJUSTED = "totalsal_maxAdjusted_PUh6xFNx5";
11305  RESULT_COUNT = "";
11306  RESULT_COUNT_LABEL = "";
11307  TEMPORARY_VARIABLE = "totalsal_ZxY0wcqwBOIhhAH";
11308  output;
11309  VARIABLE = "P_totalsal";
11310  FORMAT = "";
11311  TYPE = "";
11312  PARENT = "";
11313  LEVEL = "";
11314  PROPERTY = "PREDICTED";
11315  MEASUREMENT = "INTERVAL";
11316  LAST_LEVEL = "";
11317  GEN_VAR_IN_TEMP_DATA = "P_totalsal";
11318  RESULT_MEAN = "_meanP_";
11319  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_predMean_vlabel, NOQUOTE))";
11320  RESULT_MIN = "_minP_";
11321  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_predMin_vlabel, NOQUOTE))";
11322  MIN_ADJUSTED = "P_totals_minAdjusted_Xjj1DwEBL";
11323  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_predMin_vlabel, NOQUOTE))";
11324  RESULT_MAX = "_maxP_";
11325  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_predMax_vlabel, NOQUOTE))";
11326  MAX_ADJUSTED = "max_adjusted";
11327  RESULT_COUNT = "";
11328  RESULT_COUNT_LABEL = "";
11329  TEMPORARY_VARIABLE = "P_totalsal_oa9_s3y9FB8Pc9I";
11330  output;
11331  run;
 
NOTE: The data set WORK.ASSESS_3E9DH5R_ASSESSMETA_7LZKV3 has 2 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11332  /* Generate temporary dataset and obtain summary statistics such as total number of   */
11333  /* obserations, frequency of target.  However, summary statistics for class reporting */
11334  /* variabels are not computed here since if there exist class reporting variables,    */
11335  /* then PROC DMDB will be called. And there is no need to compute interval reporting  */
11336  /* summary statisitcs, if any.                                                        */
11337  data work.ASSESS_3E9DH5R_normSD_T8vKZY(drop=
11338  _numberOfObservation_
11339  _intervalTargetMin_ _intervalTargetMax_
11340  )
11341  work.ASSESS_3E9DH5R_meansAndTi_RRd_dA (keep=
11342  _numberOfObservation_
11343  _intervalTargetMin_ _intervalTargetMax_
11344  );
11345  set EMWS1.Tree_TRAIN(
11346  where=(
11347  (totalsal ^= .)
11348  and (P_totalsal ^= .)
11349  )
11350  ) end=_lastObservation_;
11351  keep frequency_g9hc_Q;
11352  frequency_g9hc_Q = 1;
11353  keep totalsal;
11354  keep P_totalsal;
11355  output work.ASSESS_3E9DH5R_normSD_T8vKZY;
11356  keep _numberOfObservation_;
11357  retain _numberOfObservation_ 0;
11358  _numberOfObservation_ + frequency_g9hc_Q;
11359  keep _intervalTargetMin_ _intervalTargetMax_;
11360  retain _intervalTargetMin_ .;
11361  retain _intervalTargetMax_ .;
11362  if (_n_ = 1) then do;
11363  _intervalTargetMin_ = P_totalsal;
11364  _intervalTargetMax_ = P_totalsal;
11365  end;
11366  else do;
11367  if (_intervalTargetMin_ > P_totalsal) then do;
11368  _intervalTargetMin_ = P_totalsal;
11369  end;
11370  if (_intervalTargetMax_ < P_totalsal) then do;
11371  _intervalTargetMax_ = P_totalsal;
11372  end;
11373  end;
11374  if _lastObservation_ then do;
11375  output work.ASSESS_3E9DH5R_meansAndTi_RRd_dA;
11376  end;
11377  run;
 
NOTE: Variable _WARN_ is uninitialized.
NOTE: View EMWS1.TREE_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
NOTE: There were 4915 observations read from the data set EMWS1.PART_TRAIN.
NOTE: There were 4915 observations read from the data set EMWS1.TREE_TRAIN.
      WHERE (totalsal not = .) and (P_totalsal not = .);
NOTE: The data set WORK.ASSESS_3E9DH5R_NORMSD_T8VKZY has 4915 observations and 3 variables.
NOTE: The data set WORK.ASSESS_3E9DH5R_MEANSANDTI_RRD_DA has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
 
11378  data WORK._EMRANK;
11379  set EMWS1.MdlComp_EMRANK;
11380  where MODEL = "Tree" and TARGET = "totalsal" and dataRole="TRAIN";
11381  run;
 
NOTE: There were 11 observations read from the data set EMWS1.MDLCOMP_EMRANK.
      WHERE (MODEL='Tree') and (TARGET='totalsal') and (dataRole='TRAIN');
NOTE: The data set WORK._EMRANK has 11 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11382  data work._augment;
11383  do BIN= 1 to 20;
11384  DECILE = BIN*5;
11385  output;
11386  end;
11387  run;
 
NOTE: The data set WORK._AUGMENT has 20 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11388  data WORK._EMRANK;
11389  merge WORK._AUGMENT WORK._EMRANK;
11390  by BIN;
11391  run;
 
NOTE: There were 20 observations read from the data set WORK._AUGMENT.
NOTE: There were 11 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 15 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11392  data WORK._EMRANK;
11393  set WORK._EMRANK end=_lastObservation_;
11394  retain _previousMinP_ _previousMaxP_;
11395  retain _group_ 1;
11396  keep bin _cutoff_ _group_;
11397  if (bin > 1) then do;
11398  bin = bin - 1;
11399  _cutoff_ = (_maxP_ + _previousMinP_) / 2;
11400  if (abs(_previousMaxP_ - _previousMinP_) < 1E-6) then do;
11401  /* tied */
11402  _cutoff_ = max((_minP_ + _maxP_)/2, min(_cutoff_, _previousMinP_/*-1E-6*/
11403  ));
11404  end;
11405  else if (abs(_maxP_ - _minP_) < 1E-6) then do;
11406  /* next tied */
11407  _cutoff_ = min((_previousMinP_ + _previousMaxP_)/2, max(_cutoff_, _maxP_/*+ 1E-6*/
11408  ));
11409  end;
11410  output;
11411  *if ( abs((_maxP_ +_minP_)/2 - (_previousMaxP_ + _previousMinP_)/2) > 1E-6) then do;
11412  * _group_ + 1;
11413  *end;
11414  if (_maxP_ le _previousMinP_ - 1E-6) then do;
11415  _group_ + 1;
11416  end;
11417  else if (abs(_maxP_ - _previousMinP_) < 1E-6) then do;
11418  if (abs(_maxP_ - _minP_) > 1E-6) then do;
11419  _group_ + 1;
11420  end;
11421  end;
11422  bin + 1;
11423  /* correct the previous change */
11424  end;
11425  if (_lastObservation_) then do;
11426  _cutoff_ = .;
11427  output;
11428  end;
11429  _previousMinP_ = _minP_;
11430  _previousMaxP_ = _maxP_;
11431  run;
 
NOTE: Missing values were generated as a result of performing an operation on missing values.
      Each place is given by: (Number of times) at (Line):(Column).
      11 at 11399:20   8 at 11400:5     8 at 11400:24    6 at 11402:12    9 at 11402:24    9 at 11402:33    8 at 11402:37    8 at 11414:30    2 at 11417:10    2 at 11417:21
NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
11432  data WORK._EMRANK;
11433  set WORK._EMRANK;
11434  by _group_;
11435  retain _start_;
11436  if (first._group_) then do;
11437  _start_ = _n_;
11438  end;
11439  if (last._group_) then do;
11440  _end_ = _n_;
11441  output;
11442  end;
11443  run;
 
NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 18 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of this session.
11444  filename emflow "C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\UNC Uncoded Data\UNC Uncoded\Workspaces\EMWS1\MdlComp\EMFLOWSCORE.sas";
11445  *------------------------------------------------------------*;
11446  * MdlComp: Scoring TREE_TRAIN data;
11447  *------------------------------------------------------------*;
11448  data EMWS1.MdlComp_TRAIN
11449  / view=EMWS1.MdlComp_TRAIN
11450  ;
11451  set EMWS1.Tree_TRAIN
11452  ;
11453  %inc emflow;
11504  run;
 
NOTE: DATA STEP view saved on file EMWS1.MDLCOMP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.TREE_TRAIN.VIEW used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.03 seconds
 
 
11505  quit;
11506  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
11507  filename emflow "C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\UNC Uncoded Data\UNC Uncoded\Workspaces\EMWS1\MdlComp\EMFLOWSCORE.sas";
11508  *------------------------------------------------------------*;
11509  * MdlComp: Scoring TREE_VALIDATE data;
11510  *------------------------------------------------------------*;
11511  data EMWS1.MdlComp_VALIDATE
11512  / view=EMWS1.MdlComp_VALIDATE
11513  ;
11514  set EMWS1.Tree_VALIDATE
11515  ;
11516  %inc emflow;
11567  run;
 
NOTE: DATA STEP view saved on file EMWS1.MDLCOMP_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.TREE_VALIDATE.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
11568  quit;
11569  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
11570  filename emflow "C:\Users\Intern Three\Documents\Thi Duong\SPRING 16\BUS 458H\HW\UNC Uncoded Data\UNC Uncoded\Workspaces\EMWS1\MdlComp\EMFLOWSCORE.sas";
11571  *------------------------------------------------------------*;
11572  * MdlComp: Scoring TREE_TEST data;
11573  *------------------------------------------------------------*;
11574  data EMWS1.MdlComp_TEST
11575  / view=EMWS1.MdlComp_TEST
11576  ;
11577  set EMWS1.Tree_TEST
11578  ;
11579  %inc emflow;
11630  run;
 
NOTE: DATA STEP view saved on file EMWS1.MDLCOMP_TEST.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS1.TREE_TEST.VIEW used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.03 seconds
 
 
11631  quit;
11632  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
11633  *------------------------------------------------------------*;
11634  * MdlComp: Computing metadata for TRAIN data;
11635  *------------------------------------------------------------*;
 
NOTE: View EMWS1.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
NOTE: View EMWS1.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
NOTE: View EMWS1.MDLCOMP_VALIDATE.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.03 seconds
 
NOTE: View EMWS1.MDLCOMP_TEST.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
*------------------------------------------------------------*
* Report Log
Date:                April 21, 2016
Time:                06:14:36
*------------------------------------------------------------*
